<!doctype html><html lang=en dir=ltr><head prefix="og: http://ogp.me/ns#"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>elf – home</title><script defer src=/js/fuse.min.32195737929df2c8096e855a5789cbb3f1331224d9169e8705493e7008f47df8.js></script><script src=/js/enquire.min.dfb99dee1e029d51d6cfb672d847929890b1585402de17f5ed092edd72a688b4.js></script><script defer src=/js/lazysizes.min.fb649fcae62177dfe63e67081ddceb830b5ce1f05a4184e9bbb7d87ac4b8f4e5.js></script><script defer src=/js/helper/getParents.min.ccd45f158c1b17849307ba913a72beac239c410f2b6e648496a79842da84e55b.js></script><script defer src=/js/helper/fadeinout.min.1d13d3e810c3940e80cbba6216a1c76fbf42b5431fc83537ea6997863802362b.js></script><script defer src=/js/helper/closest.min.js></script><script>"use strict";window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),String.prototype.includes||(String.prototype.includes=function(b,a){'use strict';if(b instanceof RegExp)throw TypeError('first argument must not be a RegExp');return a===void 0&&(a=0),this.indexOf(b,a)!==-1}),Document.prototype.append=Element.prototype.append=function(){this.appendChild(_mutation(arguments))};function _mutation(a){if(!a.length)throw new Error('DOM Exception 8');if(a.length===1)return typeof a[0]=='string'?document.createTextNode(a[0]):a[0];for(var c=document.createDocumentFragment(),e=a.length,d=-1,b;++d<e;)b=a[d],c.appendChild(typeof b=='string'?document.createTextNode(b):b);return c}String.prototype.startsWith||(String.prototype.startsWith=function(b,a){return a=a||0,this.indexOf(b,a)===a}),document.addEventListener('DOMContentLoaded',function(){var A=document.querySelector('.navbar__burger'),V,F,G,Q,P,f,e,O,t,ag,K,I,o,g,z,l,b,r,s,W,H,d,E,h,B,C,ap,y,ao,an,am,al,ak,D,ac,aj,ah,ae,j,i,c,ad,w,Z,U,ab,x,p,R,m,ar,aq,a,at,L,n,J,S,T,u,q,v;A?A.addEventListener('click',function(c){var a=document.querySelector('.navbarm__collapse'),b;a&&(b=a.getAttribute('data-open'),b==='true'?(a.setAttribute('data-open','false'),a.style.maxHeight=0,A.classList.remove('is-active')):(a.setAttribute('data-open','true'),a.style.maxHeight=a.scrollHeight+"px",A.classList.add('is-active')))}):null,V=document.querySelectorAll('.single__contents > table');for(let a=0;a<V.length;a++)F=V[a],G=document.createElement('div'),G.className='table-wrapper',F.parentElement.replaceChild(G,F),G.appendChild(F);Q=document.querySelectorAll('.footnote-ref'),P=document.querySelectorAll('.footnote-backref'),Q?Q.forEach(function(a,c){a.onmouseenter=function(){b.classList.contains('scrolling')&&b.classList.remove('scrolling')},a.onmouseleave=function(){b.classList.contains('scrolling')||setTimeout(function(){b.classList.add('scrolling')},100)},a.onclick=function(){b.classList.contains('scrolling')||(b.classList.remove('navbar--show'),b.classList.remove('navbar--hide'),b.classList.add('navbar--hide'))}}):null,P?P.forEach(function(a,c){a.onmouseenter=function(){b.classList.contains('scrolling')&&b.classList.remove('scrolling')},a.onmouseleave=function(){b.classList.contains('scrolling')||setTimeout(function(){b.classList.add('scrolling')},100)},a.onclick=function(){b.classList.contains('scrolling')||(b.classList.remove('navbar--show'),b.classList.remove('navbar--hide'),b.classList.add('navbar--hide'))}}):null,f=document.querySelector('.summary__container'),e=document.querySelector('.search-result'),O=document.querySelector('.search-result__close'),O?O.addEventListener('click',function(a){e.setAttribute('data-display','none'),f.setAttribute('data-display','block')}):null,document.querySelectorAll('.tab')?document.querySelectorAll('.tab').forEach(function(a,d){var e=a.getAttribute('id'),f=a,b=a.querySelectorAll('.tab__link'),c=a.querySelectorAll('.tab__content'),g=[];b&&b.length>0?b.forEach(function(b,d,a){b.onclick=function(e){for(var b=0;b<a.length;b++)d===parseInt(b,10)?a[b].classList.contains('active')||(a[b].classList.add('active'),c[b].style.display='block'):(a[b].classList.remove('active'),c[b].style.display='none')}}):null}):null,document.querySelectorAll('.codetab')?document.querySelectorAll('.codetab').forEach(function(a,d){var e=a.getAttribute('id'),f=a,b=a.querySelectorAll('.codetab__link'),c=a.querySelectorAll('.codetab__content'),g=[];b&&b.length>0?b.forEach(function(b,d,a){b.onclick=function(e){for(var b=0;b<a.length;b++)d===parseInt(b,10)?a[b].classList.contains('active')||(a[b].classList.add('active'),c[b].style.display='block'):(a[b].classList.remove('active'),c[b].style.display='none')}}):null}):null,t=document.getElementById("gtt"),t.style.display="none",t.addEventListener('click',function(){window.document.documentMode?document.documentElement.scrollTop=0:af(250)});function af(a){var b=-window.scrollY/(a/15),c=setInterval(function(){window.scrollY!=0?window.scrollBy(0,b):clearInterval(c)},15)}ag=function(){document.body.scrollTop>250||document.documentElement.scrollTop>250?t.style.display="block":t.style.display="none"},K=document.querySelectorAll('.expand__button');for(let a=0;a<K.length;a++)K[a].addEventListener("click",function(){var a=this.nextElementSibling;a.style.maxHeight?(a.style.maxHeight=null,this.querySelector('svg').classList.add('expand-icon__right'),this.querySelector('svg').classList.remove('expand-icon__down')):(a.style.maxHeight=a.scrollHeight+"px",this.querySelector('svg').classList.remove('expand-icon__right'),this.querySelector('svg').classList.add('expand-icon__down'))});I=window.pageYOffset||document.documentElement.scrollTop,o=document.querySelector('.toc'),g=o?o.querySelector('#TableOfContents'):null,z=document.getElementById('toggle-toc'),l=document.querySelector('.single__contents'),b=document.querySelector('.navbar'),r=document.querySelector('.toc__flexbox'),s=document.querySelector('.toc__flexbox--outer'),W=document.querySelectorAll('.expand__content'),H=document.querySelectorAll('.box'),d=null,E=JSON.parse("true"),h=JSON.parse('["h2","h3","h4"]'),h?h=h.toString():h="h1, h2, h3, h4, h5, h6",l&&l.querySelectorAll(".tab")?l.querySelectorAll(".tab").forEach(function(a){a.querySelectorAll(h).forEach(function(a){d=Array.isArray(d)?d.concat(a.getAttribute('id')):[a.getAttribute('id')]})}):null,W?W.forEach(function(a){a.querySelectorAll(h).forEach(function(a){d=Array.isArray(d)?d.concat(a.getAttribute('id')):[a.getAttribute('id')]})}):null,H?H.forEach(function(a){a.querySelectorAll(h).forEach(function(a){d=Array.isArray(d)?d.concat(a.getAttribute('id')):[a.getAttribute('id')]})}):null,window.onscroll=function(){ag();var a=window.pageYOffset||document.documentElement.scrollTop;if(a>I){if(a<250?t.style.display="none":t.style.display="block",a<45)return null;b.classList.contains('scrolling')&&(b.classList.contains('navbar--hide')?b.classList.contains('navbar--show')&&b.classList.remove('navbar--show'):b.classList.add('navbar--hide')),l&&(l.querySelectorAll(h).length>0?l.querySelectorAll(h).forEach(function(c){var b,a;if(z&&!z.checked)return null;if(d&&d.includes(c.getAttribute('id')))return null;document.documentElement.scrollTop>=c.offsetTop&&g&&(b=c.getAttribute('id'),o.querySelectorAll('a').forEach(function(a){a.classList.remove('active')}),o.querySelector('a[href="#'+b+'"]')?o.querySelector('a[href="#'+b+'"]').classList.add('active'):null,!1===E||(g.querySelectorAll('ul')?g.querySelectorAll('ul').forEach(function(a){a.querySelectorAll('li').forEach(function(a){a.querySelectorAll('ul').forEach(function(a){a.style.display='none'})})}):null),a=g.querySelector("[href='#"+b+"']"),a&&a.nextElementSibling&&(a.nextElementSibling.style.display='block'),getParents(a,'ul')?getParents(a,'ul').forEach(function(a){a.style.display='block'}):null)}):(r&&(r.setAttribute('data-position',''),r.classList.contains('hide')||r.classList.add('hide')),s&&(s.setAttribute('data-position',''),s.classList.contains('hide')||s.classList.add('hide'))))}else a<250&&(t.style.display="none"),b.classList.contains('scrolling')&&(b.classList.contains('navbar--hide')?b.classList.remove('navbar--hide'):b.classList.contains('navbar--show')||b.classList.add('navbar--show')),l&&(l.querySelectorAll(h).length>0?l.querySelectorAll(h).forEach(function(c){var b,a;if(z&&!z.checked)return null;if(d&&d.includes(c.getAttribute('id')))return null;document.documentElement.scrollTop>=c.offsetTop&&g&&(b=c.getAttribute('id'),o.querySelectorAll('a').forEach(function(a){a.classList.remove('active')}),o.querySelector('a[href="#'+b+'"]')?o.querySelector('a[href="#'+b+'"]').classList.add('active'):null,!1===E||(g.querySelectorAll('ul')?g.querySelectorAll('ul').forEach(function(a){a.querySelectorAll('li').forEach(function(a){a.querySelectorAll('ul').forEach(function(a){a.style.display='none'})})}):null),a=g.querySelector("[href='#"+b+"']"),a&&a.nextElementSibling&&(a.nextElementSibling.style.display='block'),getParents(a,'ul')?getParents(a,'ul').forEach(function(a){a.style.display='block'}):null)}):(r&&!r.classList.contains('hide')&&r.classList.add('hide'),s&&!s.classList.contains('hide')&&s.classList.add('hide'))),g&&document.documentElement.scrollTop<250&&(!1===E||(g.querySelector('ul')?g.querySelector('ul').querySelectorAll('li').forEach(function(a){a.querySelectorAll('ul').forEach(function(a){a.style.display='none'})}):null));I=a<=0?0:a},B=localStorage.getItem('theme'),C=document.getElementById('root'),ap=document.querySelectorAll('.select-theme'),y=document.querySelectorAll('.select-theme__item'),ao=JSON.parse('"dark"'),an=JSON.parse('"light"'),am=JSON.parse('"hacker"'),al=JSON.parse('"solarized"'),ak=JSON.parse('"kimbie"'),D=function(a){var b=document.getElementsByName('msapplication-TileColor')[0],c=document.getElementsByName('theme-color')[0],d=document.getElementsByName('msapplication-navbutton-color')[0],e=document.getElementsByName('apple-mobile-web-app-status-bar-style')[0];a.includes('dark')?(b.setAttribute('content','#fcfcfa'),c.setAttribute('content','#403E41'),d.setAttribute('content','#403E41'),e.setAttribute('content','#403E41')):a.includes('light')?(b.setAttribute('content','#555'),c.setAttribute('content','#eee'),d.setAttribute('content','#eee'),e.setAttribute('content','#eee')):a.includes('hacker')?(b.setAttribute('content','#e3cd26'),c.setAttribute('content','#252526'),d.setAttribute('content','#252526'),e.setAttribute('content','#252526')):a.includes('solarized')?(b.setAttribute('content','#d3af86'),c.setAttribute('content','#51412c'),d.setAttribute('content','#51412c'),e.setAttribute('content','#51412c')):a.includes('kimbie')&&(b.setAttribute('content','#586e75'),c.setAttribute('content','#eee8d5'),d.setAttribute('content','#eee8d5'),e.setAttribute('content','#eee8d5'))},ac=function(a){if(a===ao)return'dark';if(a===an)return'light';if(a===am)return'hacker';if(a===al)return'solarized';if(a===ak)return'kimbie'},B?(y?y.forEach(function(a){a.text.trim()===B?a.classList.add('is-active'):a.classList.remove('is-active')}):null,D(B)):D(C.className),y?y.forEach(function(a,b){a.addEventListener('click',function(c){var a=ac(c.target.text.trim()),b,d;localStorage.setItem('theme',a),D(a),C.removeAttribute('class'),C.classList.add('theme__'+a),ap.forEach(function(b){b.querySelectorAll('a').forEach(function(b){b.classList&&(b.text.trim()===a?b.classList.contains('is-active')||b.classList.add('is-active'):b.classList.contains('is-active')&&b.classList.remove('is-active'))})}),window.mermaid&&(a==="dark"||a==="hacker"?(mermaid.initialize({theme:'dark'}),location.reload()):(mermaid.initialize({theme:'default'}),location.reload())),b=document.getElementById('utterances'),b&&b.querySelector('iframe').contentWindow.postMessage({type:'set-theme',theme:a==="dark"||a==="hacker"?'photon-dark':a==='kimbie'?'github-dark-orange':'github-light'},'https://utteranc.es'),d=document.querySelectorAll('.twitter-timeline'),d&&window.postMessage({type:'set-twitter-theme',theme:a==='light'||a==='solarized'?'light':'dark'})})}):null,aj=JSON.parse('"https://lu-yi-hsun.github.io/"'),ah=JSON.parse('"https://lu-yi-hsun.github.io/posts/linux/elf/"'),ae=JSON.parse('""'),j=null,i=null,c=null,ad=JSON.parse("true"),w=JSON.parse("true"),Z=JSON.parse('"main"'),U=JSON.parse('"posts"'),ab=JSON.parse('"page"'),x=null,ad&&function(){var a=new XMLHttpRequest;U==="publication"&&ab!=="page"?a.open('GET',ah+"index.json"):a.open('GET',aj+ae+"/index.json"),a.setRequestHeader('Content-Type','application/json; charset=utf-8'),a.onload=function(){a.status===200?(x=new Fuse(JSON.parse(a.response.toString('utf-8')),{keys:U.includes('publication')?['title','abstract']:['title','description','content'],includeMatches:w,shouldSort:!0,threshold:.4,location:0,distance:100,maxPatternLength:32,minMatchCharLength:1,isCaseSensitive:!1,findAllMatches:!1,useExtendedSearch:!1}),window.fuse=x):console.error('['+a.status+']Error:',a.statusText)},a.send()}();function ai(e,a){var b=document.createElement('li'),c,d;b.className='search-result__item',c=document.createElement('a'),c.innerHTML=a.item.title,c.setAttribute('class','search-result__item--title'),c.setAttribute('href',a.item.permalink),d=document.createElement('div'),d.setAttribute('class','search-result__item--desc'),a.item.description?d.innerHTML=a.item.description:a.item.content&&(d.innerHTML=a.item.content.substring(0,225)),b.appendChild(c),b.appendChild(d),e.appendChild(b)}function $(f,a){var e=document.createElement('li'),b,d,c;if(e.className='search-result__item',b=null,d=document.createElement('a'),d.innerHTML=a.item.title,d.setAttribute('class','search-result__item--title'),d.setAttribute('href',a.item.uri),a.matches&&a.matches.length){for(c=0;c<a.matches.length;c++)'title'===a.matches[c].key&&(d=document.createElement('a'),d.innerHTML=k(a.matches[c].value,a.matches[c].indices),d.setAttribute('class','search-result__item--title'),d.setAttribute('href',a.item.uri)),'description'===a.matches[c].key?(b=document.createElement('div'),b.setAttribute('class','search-result__item--desc'),b.innerHTML=k(a.item.description,a.matches[c].indices)):'content'===a.matches[c].key?b||(b=document.createElement('div'),b.setAttribute('class','search-result__item--desc'),b.innerHTML=k(a.item.content.substring(0,150),a.matches[c].indices)):a.item.description?(b=document.createElement('div'),b.setAttribute('class','search-result__item--desc'),b.innerHTML=a.item.description):(b=document.createElement('div'),b.setAttribute('class','search-result__item--desc'),b.innerHTML=a.item.content.substring(0,150));e.appendChild(d),b&&e.appendChild(b),e&&f.appendChild(e)}}function Y(d,c){var a,b;for(j=document.getElementById('search-results'),i=document.getElementById('search-menu'),j.setAttribute('class','dropdown is-active'),a=document.createElement('ul'),a.setAttribute('class','dropdown-content search-content'),c.length?c.forEach(function(b){var e=document.createElement('li'),c=document.createElement('a'),f,d;c.setAttribute('href',b.uri),c.setAttribute('class','dropdown-item'),c.appendChild(e),f=document.createElement('div'),f.innerHTML=b.title,f.setAttribute('class','menu-item__title'),d=document.createElement('div'),d.setAttribute('class','menu-item__desc'),b.description?d.innerHTML=b.description:b.content&&(d.innerHTML=b.content.substring(0,150)),e.appendChild(f),e.appendChild(d),a.appendChild(c)}):(b=document.createElement('li'),b.setAttribute('class','dropdown-item'),b.innerText='No results found',a.appendChild(b));i.hasChildNodes();)i.removeChild(i.lastChild);i.appendChild(a)}function M(d,c){var a,b;for(j=document.getElementById('search-results'),i=document.getElementById('search-menu'),j.setAttribute('class','dropdown is-active'),a=document.createElement('ul'),a.setAttribute('class','dropdown-content search-content'),c.length?c.forEach(function(b){var g=document.createElement('li'),e=document.createElement('a'),c=null,f,d;if(e.setAttribute('href',b.item.uri),e.setAttribute('class','dropdown-item'),e.appendChild(g),f=document.createElement('div'),f.innerHTML=b.item.title,f.setAttribute('class','menu-item__title'),b.matches&&b.matches.length){for(d=0;d<b.matches.length;d++)'title'===b.matches[d].key&&(f.innerHTML=k(b.matches[d].value,b.matches[d].indices)),'description'===b.matches[d].key?(c=document.createElement('div'),c.setAttribute('class','menu-item__desc'),c.innerHTML=k(b.item.description,b.matches[d].indices)):'content'===b.matches[d].key?c||(c=document.createElement('div'),c.setAttribute('class','menu-item__desc'),c.innerHTML=k(b.item.content.substring(0,150),b.matches[d].indices)):b.item.description?(c=document.createElement('div'),c.setAttribute('class','menu-item__desc'),c.innerHTML=b.item.description):(c=document.createElement('div'),c.setAttribute('class','menu-item__desc'),c.innerHTML=b.item.content.substring(0,150));g.appendChild(f),c&&g.appendChild(c),a.appendChild(e)}}):(b=document.createElement('li'),b.setAttribute('class','dropdown-item'),b.innerText='No results found',a.appendChild(b));i.hasChildNodes();)i.removeChild(i.lastChild);i.appendChild(a)}function X(e,c){var a,d;j=document.getElementById('search-mobile-results'),a=document.createElement('div'),a.setAttribute('class','mobile-search__content'),c.length>0?c.forEach(function(b){var c=document.createElement('a');c.setAttribute('href',b.uri),c.innerHTML='<div class="mobile-search__item"><div class="mobile-search__item--title">📄 '+b.title+'</div><div class="mobile-search__item--desc">'+(b.description?b.description:b.content)+'</div></div>',a.appendChild(c)}):(d=document.createElement('span'),a.appendChild(d));let b=document.getElementById('search-mobile-results');while(b.firstChild)b.removeChild(b.firstChild);j.appendChild(a)}function aa(e,c){var a,d;j=document.getElementById('search-mobile-results'),a=document.createElement('div'),a.setAttribute('class','mobile-search__content'),c.length?c.forEach(function(b){var e=document.createElement('li'),g=document.createElement('a'),c=null,f,d;if(g.setAttribute('href',b.item.uri),g.appendChild(e),e.setAttribute('class','mobile-search__item'),f=document.createElement('div'),f.innerHTML=b.item.title,f.setAttribute('class','mobile-search__item--title'),b.matches&&b.matches.length){for(d=0;d<b.matches.length;d++)'title'===b.matches[d].key&&(f.innerHTML=k(b.matches[d].value,b.matches[d].indices)),'description'===b.matches[d].key?(c=document.createElement('div'),c.setAttribute('class','mobile-search__item--desc'),c.innerHTML=k(b.item.description,b.matches[d].indices)):'content'===b.matches[d].key?c||(c=document.createElement('div'),c.setAttribute('class','mobile-search__item--desc'),c.innerHTML=k(b.item.content.substring(0,150),b.matches[d].indices)):b.item.description?(c=document.createElement('div'),c.setAttribute('class','mobile-search__item--desc'),c.innerHTML=b.item.description):(c=document.createElement('div'),c.setAttribute('class','mobile-search__item--desc'),c.innerHTML=b.item.content.substring(0,150));e.appendChild(f),c&&e.appendChild(c),a.appendChild(g)}}):(d=document.createElement('span'),a.appendChild(d));let b=document.getElementById('search-mobile-results');while(b.firstChild)b.removeChild(b.firstChild);j.appendChild(a)}function k(a,d){if(!d)return a;var b='',c=0;return d.forEach(function(d){if(d[0]===d[1])return null;b+=''+a.substring(c,d[0])+'<span class="search__highlight">'+a.substring(d[0],d[1]+1)+'</span>'+'',c=d[1]+1}),b+=a.substring(c),b}p=document.getElementById('search'),R=document.getElementById('search-mobile'),m=document.getElementById('search-results'),p?p.addEventListener('input',function(b){var a,d;if(!b.target.value|window.innerWidth<770)return m?m.setAttribute('class','dropdown'):null,e?e.setAttribute('data-display','none'):null,f?f.setAttribute('data-display','block'):null,null;c=b.target.value,a=x.search(b.target.value),Z==="main"?w?_(c,a):N(c,a):(w?M(c,a):Y(c,a),d=m.querySelectorAll('.dropdown-item'),d?d.forEach(function(a){a.addEventListener('mousedown',function(a){a.target.click()})}):null)}):null,p?p.addEventListener('blur',function(){if(window.innerWidth<770)return null;m?m.setAttribute('class','dropdown'):null}):null,p?p.addEventListener('click',function(b){var a,d;if(window.innerWidth<770)return null;if(!b.target.value)return m?m.setAttribute('class','dropdown'):null,null;c=b.target.value,a=x.search(b.target.value),Z==="main"?w?_(c,a):N(c,a):(w?M(c,a):Y(c,a),d=m.querySelectorAll('.dropdown-item'),d?d.forEach(function(a){a.addEventListener('mousedown',function(a){a.target.click()})}):null)}):null,ar=document.getElementById("search-menu"),aq=document.querySelector('#search-menu .dropdown-item.is-active'),a=null,at=null,L=350,p?p.addEventListener('keydown',function(c){var b,d;if(window.innerWidth<770)return null;if(c.key==='Escape'&&(e?e.setAttribute('data-display','none'):null,f?f.setAttribute('data-display','block'):null),b=document.querySelectorAll('#search-menu .dropdown-item'),d=c.which||c.keyCode,!b||!b.length)return null;if(c.key==='ArrowDown'||d===40){a===null?(a=0,b[a].classList.remove('is-active')):(b[a].classList.remove('is-active'),a=a===b.length-1?0:a+1),b[a].classList.add('is-active');let c=b[a].offsetTop+b[a].clientHeight-L;c>0?document.querySelector(".search-content").scrollTop+=b[a].getBoundingClientRect().height:a===0&&(document.querySelector(".search-content").scrollTop=0)}else if(c.key==='ArrowUp'||d===38){a===null?(a=b.length-1,b[a].classList.remove('is-active')):(b[a].classList.remove('is-active'),a=a===0?b.length-1:a-1),b[a].classList.add('is-active');let c=b[a].offsetTop+b[a].clientHeight-L;c<0?document.querySelector(".search-content").scrollTop-=b[a].getBoundingClientRect().height:document.querySelector(".search-content").scrollTop=c+b[a].getBoundingClientRect().height}else c.key==='Enter'||d===13?b[a]&&b[a].getAttribute('href')&&(location.href=b[a].getAttribute('href')):(c.key==='Escape'||d===27)&&(c.target.value=null,j&&j.classList.remove('is-active'))}):null,R?R.addEventListener('input',function(a){if(!a.target.value){let a=document.getElementById('search-mobile-results');while(a.firstChild)a.removeChild(a.firstChild);return null}c=a.target.value;var b=x.search(a.target.value);X(c,b),w?aa(c,b):X(c,b)}):null,n=document.querySelector('#search-mobile'),J=document.querySelector('.mobile-search'),S=document.querySelectorAll('.navbar-search'),T=document.querySelector('#search-mobile-close'),u=document.querySelector('#search-mobile-container'),q=document.querySelector('#search-mobile-results'),v=document.querySelector('html'),J&&(J.style.display='none'),S?S.forEach(function(a,b){a.addEventListener('click',function(){u&&(u.style.display='block'),n&&n.focus(),v&&(v.style.overflowY='hidden')})}):null,T?T.addEventListener('click',function(){if(u&&(u.style.display='none'),n&&(n.value=''),q)while(q.firstChild)q.removeChild(q.firstChild);v&&(v.style.overflowY='visible')}):null,n?n.addEventListener('keydown',function(a){var b=a.which||a.keyCode;if(a.key==='Escape'||b===27){if(u&&(u.style.display='none'),n&&(n.value=''),q)while(q.firstChild)q.removeChild(q.firstChild);v&&(v.style.overflowY='visible')}}):null;function N(d,a){var g=document.querySelector('.search-result__body'),b=g.querySelector('ul'),c=document.createElement('ul');d?a&&a&&a.length&&(a.forEach(function(a){ai(c,a)}),e?e.setAttribute('data-display','block'):null,f?f.setAttribute('data-display','none'):null):(e?e.setAttribute('data-display','none'):null,f?f.setAttribute('data-display','block'):null),b.parentNode.replaceChild(c,b)}function _(d,a){var g=document.querySelector('.search-result__body'),b=g.querySelector('ul'),c=document.createElement('ul');d?a&&a&&a.length&&(a.forEach(function(a){$(c,a)}),e?e.setAttribute('data-display','block'):null,f?f.setAttribute('data-display','none'):null):(e?e.setAttribute('data-display','none'):null,f?f.setAttribute('data-display','block'):null),b.parentNode.replaceChild(c,b)}})</script><link rel=stylesheet href=/css/main.min.css><meta name=description content="lu yi hsun site"><meta name=keywords content="binary,系統程式,安全"><meta name=created content="2021-01-30T05:23:00+0800"><meta name=modified content="2021-01-30T05:23:00+0800"><meta property="article:published_time" content="2021-01-30T05:23:00+0800"><meta name=author content="呂奕珣"><meta property="og:site_name" content="home"><meta property="og:title" content="elf"><meta property="og:url" content="https://lu-yi-hsun.github.io/posts/linux/elf/"><meta property="og:type" content="article"><meta property="og:description" content="lu yi hsun site"><meta name=generator content="Hugo 0.81.0"><meta name=msapplication-TileColor content="#fff"><meta name=theme-color content="#fff"><meta name=msapplication-navbutton-color content="#fff"><meta name=apple-mobile-web-app-status-bar-style content="#fff"><link rel=canonical href=https://lu-yi-hsun.github.io/posts/linux/elf/><link rel=manifest href=/manifest.json><link rel=apple-touch-icon sizes=57x57 href=/favicon/apple-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=/favicon/apple-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=/favicon/apple-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=/favicon/apple-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=/favicon/apple-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=/favicon/apple-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=/favicon/apple-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=/favicon/apple-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=/favicon/apple-icon-180x180.png><link rel=icon type=image/png sizes=192x192 href=/favicon/android-icon-192x192.png><link rel=icon type=image/png sizes=192x192 href=/favicon/android-icon-512x512.png><link rel=icon type=image/png sizes=32x32 href=/favicon/favicon-32x32.png><link rel=icon type=image/png sizes=96x96 href=/favicon/favicon-96x96.png><link rel=icon type=image/png sizes=16x16 href=/favicon/favicon-16x16.png><meta name=msapplication-TileColor content="#ffffff"><meta name=msapplication-TileImage content="/ms-icon-144x144.png"><script type=application/ld+json>{"@context":"https://schema.org","@type":"WebPage","headline":"elf","datePublished":"2021-01-30T05:23:00+08:00","dateModified":"2021-01-30T05:23:00+08:00","url":"https://lu-yi-hsun.github.io/posts/linux/elf/","description":"接下來以linux v5.10 64bit Elf64作範例 簡介 Executable and Linking Format (ELF)這個格式包含了執行與連結用的檔案,可以搭配文件交叉看 elf.pdf 原始碼elf.h linux","keywords":["binary","系統程式","安全"],"mainEntityOfPage":{"@type":"WebPage","@id":"https://lu-yi-hsun.github.io/"},"publisher":{"@type":"Organization","name":"home","url":"https://lu-yi-hsun.github.io/"}}</script></head><body id=root class=theme__dark><script>var localTheme=localStorage.getItem('theme');localTheme&&(document.getElementById('root').className='theme__'+localTheme)</script><div id=container><div class=wrapper data-type=posts data-kind=page><nav class="navbar scrolling" role=navigation aria-label="main navigation" data-dir=ltr><div class=navbar__brand><a href=/ title=Home rel=home class=navbar__logo-link><img src=/logo.png alt=Home class=navbar__logo></a>
<a href=/ title=Home rel=home class=navbar__title-link><h6 class=navbar__title></h6></a></div><div class="theme theme-mobile" data-ani=true><div class=dropdown><button class="dropdown-trigger navbar__slide-down" aria-label="Select Theme Button" data-ani=true><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24"><path fill="none" d="M24 0H0v24h24V0z"/><path fill="currentcolor" d="M6.34 7.93c-3.12 3.12-3.12 8.19.0 11.31C7.9 20.8 9.95 21.58 12 21.58s4.1-.78 5.66-2.34c3.12-3.12 3.12-8.19.0-11.31l-4.95-4.95c-.39-.39-1.02-.39-1.41.0L6.34 7.93zM12 19.59c-1.6.0-3.11-.62-4.24-1.76C6.62 16.69 6 15.19 6 13.59s.62-3.11 1.76-4.24L12 5.1v14.49z"/></svg></button><div class="dropdown-content select-theme"><a href=# class="dropdown-item select-theme__item is-active">dark</a>
<a href=# class="dropdown-item select-theme__item">light</a>
<a href=# class="dropdown-item select-theme__item">hacker</a>
<a href=# class="dropdown-item select-theme__item">solarized</a>
<a href=# class="dropdown-item select-theme__item">kimbie</a></div></div></div><div class="mobile-search__btn navbar-search" data-ani=true><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentcolor" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M15.5 14h-.79l-.28-.27c1.2-1.4 1.82-3.31 1.48-5.34-.47-2.78-2.79-5-5.59-5.34-4.23-.52-7.79 3.04-7.27 7.27.34 2.8 2.56 5.12 5.34 5.59 2.03.34 3.94-.28 5.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49.0s.41-1.08.0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg></div><div id=search-mobile-container class="mobile-search hide" data-dir=ltr><div class=mobile-search__top><input id=search-mobile type=text aria-label="Mobile Search" placeholder=Search class=mobile-search__top--input><div id=search-mobile-close class=mobile-search__top--icon><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24"><path opacity=".87" fill="none" d="M0 0h24v24H0V0z"/><path fill="currentcolor" d="M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41.0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3.59-13L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41z"/></svg></div></div><div id=search-mobile-results class=mobile-search__body></div></div><a role=button class=navbar__burger aria-label=menu aria-expanded=false data-ani=true><span aria-hidden=true></span><span aria-hidden=true></span><span aria-hidden=true></span></a><div class=navbarm__collapse data-open=false><ul dir=ltr><li class=navbarm__menu--item><a href=/about>我誰</a></li><li class=navbarm__menu--item><a href=/archive>Archive</a></li><li class=navbarm__menu--item><a href=/presentation>Pt</a></li><li class=navbarm__menu--item><a href=/gallery>Gallery<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"><path fill="currentcolor" d="M8.12 9.29 12 13.17l3.88-3.88c.39-.39 1.02-.39 1.41.0s.39 1.02.0 1.41l-4.59 4.59c-.39.39-1.02.39-1.41.0L6.7 10.7c-.39-.39-.39-1.02.0-1.41.39-.38 1.03-.39 1.42.0z"/></svg></a></li><li class="navbarm__menu--item navbarm__menu--subitem"><a href=/gallery/cartoon>Cartoon</a></li><li class="navbarm__menu--item navbarm__menu--subitem"><a href=/gallery/photo>Photo</a></li><li class="navbarm__menu--item active"><a href=/posts>技術</a></li><li class=navbarm__menu--item><a href=/publication>論文筆記</a></li><li class=navbarm__menu--item><a href=/tags class=navbarm__menu--term data-index=0>Tags</a></li><li class=navbarm__menu--item><a href=/categories class=navbarm__menu--term data-index=1>Categories</a></li><li class=navbarm__menu--item><a href=/series class=navbarm__menu--term data-index=2>Series</a></li></ul></div><div class=navbar__menu><div class=theme data-ani=true><div class=dropdown><button class="dropdown-trigger navbar__slide-down" aria-label="Select Theme Button" data-ani=true><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24"><path fill="none" d="M24 0H0v24h24V0z"/><path fill="currentcolor" d="M6.34 7.93c-3.12 3.12-3.12 8.19.0 11.31C7.9 20.8 9.95 21.58 12 21.58s4.1-.78 5.66-2.34c3.12-3.12 3.12-8.19.0-11.31l-4.95-4.95c-.39-.39-1.02-.39-1.41.0L6.34 7.93zM12 19.59c-1.6.0-3.11-.62-4.24-1.76C6.62 16.69 6 15.19 6 13.59s.62-3.11 1.76-4.24L12 5.1v14.49z"/></svg></button><div class="dropdown-content select-theme"><a href=# class="dropdown-item select-theme__item is-active">dark</a>
<a href=# class="dropdown-item select-theme__item">light</a>
<a href=# class="dropdown-item select-theme__item">hacker</a>
<a href=# class="dropdown-item select-theme__item">solarized</a>
<a href=# class="dropdown-item select-theme__item">kimbie</a></div></div></div><a href=/about class="navbar__menu-item navbar__slide-down" dir=ltr data-ani=true>我誰</a>
<a href=/archive class="navbar__menu-item navbar__slide-down" dir=ltr data-ani=true>Archive</a>
<a href=/presentation class="navbar__menu-item navbar__slide-down" dir=ltr data-ani=true>Pt</a><div class="navbar__dropdown navbar__slide-down" data-ani=true><a href=/gallery class=navbar__menu-item dir=ltr>Gallery<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"><path fill="currentcolor" d="M8.12 9.29 12 13.17l3.88-3.88c.39-.39 1.02-.39 1.41.0s.39 1.02.0 1.41l-4.59 4.59c-.39.39-1.02.39-1.41.0L6.7 10.7c-.39-.39-.39-1.02.0-1.41.39-.38 1.03-.39 1.42.0z"/></svg></a><div class=navbar__dropdown--content><a href=/gallery/cartoon class=navbar__dropdown--item dir=ltr>Cartoon</a>
<a href=/gallery/photo class=navbar__dropdown--item dir=ltr>Photo</a></div></div><a href=/posts class="navbar__menu-item navbar__slide-down active" dir=ltr data-ani=true>技術</a>
<a href=/publication class="navbar__menu-item navbar__slide-down" dir=ltr data-ani=true>論文筆記</a></div></nav><main class="single__main main-main"><nav class="breadcrumb hide" aria-label=breadcrumbs><script>document.querySelector('.breadcrumb').classList.remove('hide')</script><ol><li><a href=https://lu-yi-hsun.github.io/ class=capitalize>home</a></li><li><a href=https://lu-yi-hsun.github.io/posts/ class=capitalize>技術</a></li><li class=is-active><span>elf</span></li></ol></nav><div class=single><div class=single__nojs>This page looks best with JavaScript enabled</div><script>document.querySelector('.single').classList.remove('hide'),document.querySelector('.single__nojs').classList.add('hide')</script><h2 class=single__title data-ani=true>elf</h2><h3 class=single__subtitle></h3><div class=single__meta><div class=single__infos><time class=single__info title="Written At">📅&nbsp;Jan 30, 2021</time>
&nbsp;&#183;&nbsp; <span class=single__info title="Reading Time">☕&nbsp;14&nbsp;min read</span>
<span class=single__info></span></div><ul class="single__tags caption">🏷️<li><a href=https://lu-yi-hsun.github.io/tags/binary/ class=single__tag title=binary>#binary</a></li><li><a href=https://lu-yi-hsun.github.io/tags/%E7%B3%BB%E7%B5%B1%E7%A8%8B%E5%BC%8F/ class=single__tag title=系統程式>#系統程式</a></li><li><a href=https://lu-yi-hsun.github.io/tags/%E5%AE%89%E5%85%A8/ class=single__tag title=安全>#安全</a></li></ul></div><article class=single__contents data-dir=ltr data-ani=true><div class="notices warning" data-title=Warning>接下來以linux v5.10 64bit Elf64作範例</div><h2 id=簡介>簡介</h2><p><img src=../elf_arch.drawio.svg alt=elf_arch></p><p>Executable and Linking Format (ELF)這個格式包含了執行與連結用的檔案,可以搭配文件交叉看</p><ul><li><a href=https://refspecs.linuxfoundation.org/elf/elf.pdf>elf.pdf</a></li><li>原始碼<a href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/include/uapi/linux/elf.h?h=v5.10">elf.h</a></li><li>linux載入elf行為-<a href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/fs/binfmt_elf.c?h=v5.10#n820">load_elf_binary</a></li><li><a href=https://man7.org/linux/man-pages/man5/elf.5.html>man</a></li><li><a href=https://refspecs.linuxfoundation.org/elf/gabi4+/ch4.eheader.html>eheader</a></li><li><a href=https://mudongliang.github.io/2015/10/23/elf.html>ELF文件可执行栈的深入分析</a></li><li><a href=https://docs.oracle.com/cd/E26502_01/html/E26507/chapter6-43405.html>Oracle Solaris 11.1 Linkers and Libraries Guide</a></li></ul><h2 id=elf-header>ELF header</h2><p>利用指令查看</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>readelf -h 你的檔名
</code></pre></td></tr></table></div></div><p>原始碼<a href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/include/uapi/linux/elf.h?h=v5.10">elf.h</a></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-c data-lang=c><span class=k>typedef</span> <span class=k>struct</span> <span class=n>elf64_hdr</span> <span class=p>{</span>
	<span class=kt>unsigned</span> <span class=kt>char</span> <span class=n>e_ident</span><span class=p>[</span><span class=mi>16</span><span class=p>];</span>	<span class=cm>/* ELF &#34;magic number&#34; */</span>
	<span class=n>Elf64_Half</span> <span class=n>e_type</span><span class=p>;</span>
	<span class=n>Elf64_Half</span> <span class=n>e_machine</span><span class=p>;</span>
	<span class=n>Elf64_Word</span> <span class=n>e_version</span><span class=p>;</span>
	<span class=n>Elf64_Addr</span> <span class=n>e_entry</span><span class=p>;</span>	<span class=cm>/* Entry point virtual address */</span>
	<span class=n>Elf64_Off</span> <span class=n>e_phoff</span><span class=p>;</span>	<span class=cm>/* Program header table file offset */</span>
	<span class=n>Elf64_Off</span> <span class=n>e_shoff</span><span class=p>;</span>	<span class=cm>/* Section header table file offset */</span>
	<span class=n>Elf64_Word</span> <span class=n>e_flags</span><span class=p>;</span>
	<span class=n>Elf64_Half</span> <span class=n>e_ehsize</span><span class=p>;</span>
	<span class=n>Elf64_Half</span> <span class=n>e_phentsize</span><span class=p>;</span>
	<span class=n>Elf64_Half</span> <span class=n>e_phnum</span><span class=p>;</span>
	<span class=n>Elf64_Half</span> <span class=n>e_shentsize</span><span class=p>;</span>
	<span class=n>Elf64_Half</span> <span class=n>e_shnum</span><span class=p>;</span>
	<span class=n>Elf64_Half</span> <span class=n>e_shstrndx</span><span class=p>;</span>
<span class=p>}</span> <span class=n>Elf64_Ehdr</span><span class=p>;</span>
</code></pre></td></tr></table></div></div><h3 id=e_ident>e_ident</h3><table><thead><tr><th>Name</th><th>e_ident第幾個bytes</th><th>Purpose</th></tr></thead><tbody><tr><td>EI_MAG0</td><td>0</td><td>0x7f</td></tr><tr><td>EI_MAG1</td><td>1</td><td>&lsquo;E&rsquo;</td></tr><tr><td>EI_MAG2</td><td>2</td><td>&lsquo;L&rsquo;</td></tr><tr><td>EI_MAG3</td><td>3</td><td>&lsquo;F&rsquo;</td></tr><tr><td>EI_CLASS</td><td>4</td><td>ELFCLASSNONE=0</br>ELFCLASS32=1</br>ELFCLASS64=2</td></tr><tr><td>EI_DATA</td><td>5</td><td>ELFDATANONE=0</br>ELFDATA2LSB=1 又稱little endian</br>ELFDATA2MSB=2 又稱big endian</td></tr><tr><td>EI_VERSION</td><td>6</td><td>原始的ELF specification規範這裡固定是1,除非你要設計自己客製擴展ELF的規範不然<code>e_version</code>與<code>EI_VERSION</code>都是固定1</td></tr><tr><td>EI_OSABI</td><td>7</td><td>ELFOSABI_NONE/ELFOSABI_SYSV 0 UNIX System V ABI</br>ELFOSABI_HPUX 1 Hewlett-Packard HP-UX</br>ELFOSABI_NETBSD 2 NetBSD</br>ELFOSABI_LINUX 3 Linux</br>ELFOSABI_SOLARIS 6 Sun Solaris</br>ELFOSABI_AIX 7 AIX</br>ELFOSABI_IRIX 8 IRIX</br>ELFOSABI_FREEBSD 9 FreeBSD</br>ELFOSABI_TRU64 10 Compaq TRU64 UNIX</br>ELFOSABI_MODESTO 11 Novell Modesto</br>ELFOSABI_OPENBSD 12 Open BSD</br>ELFOSABI_OPENVMS 13 Open VMS</br>ELFOSABI_NSK 14 Hewlett-Packard Non-Stop Kernel</br></td></tr><tr><td>EI_ABIVERSION</td><td>8</td><td>ABI version</td></tr><tr><td>EI_PAD</td><td>9</td><td>Start of padding bytes 從這裡開始就補0直到最後 關於padding請看(你所不知道的 C 語言：記憶體管理、對齊及硬體特性)[https://hackmd.io/@sysprog/c-memory#data-alignment]</td></tr><tr><td>EI_NIDENT</td><td>16</td><td>Size of e_ident[]</td></tr></tbody></table><div class="notices info" data-title=Info>嘗試利用<a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode.hexeditor">vscode的Hex Editor</a>修改執行檔並且利用readelf觀察</div><h3 id=e_type>e_type</h3><p>這邊描述elf檔案是什麼型態包含了<code>ET_REL</code>,<code>ET_EXEC</code>,<code>ET_DYN</code>,<code>ET_CORE</code>,接下來簡單</p><table><thead><tr><th>e_type</th><th>數值(unsigned short)</th><th>用途</th></tr></thead><tbody><tr><td>ET_NONE</td><td>0</td><td>No file type 未知格式(我在linux核心找不到有啥特別用途)</td></tr><tr><td>ET_REL</td><td>1</td><td>Relocatable file 靜態連結 .o(object file) .a(靜態連結庫) .ko(kernel module)</td></tr><tr><td>ET_EXEC</td><td>2</td><td>Executable file 可以執行的檔案</td></tr><tr><td>ET_DYN</td><td>3</td><td>Shared object file 動態連結檔案.so,或是position-independent executable</td></tr><tr><td>ET_CORE</td><td>4</td><td>Core file 當發生core dumped如果有<code>設定</code>linux會輸出這個type的elf檔案讓你追蹤為什麼程式崩潰了</td></tr><tr><td>ET_LOPROC</td><td>0xff00</td><td>Processor-specific ET_LOPROC~ET_HIPROC範圍的數值</td></tr><tr><td>ET_HIPROC</td><td>0xffff</td><td>Processor-specific 同上</td></tr></tbody></table><h4 id=et_rel>ET_REL</h4><h5 id=object-file>object file</h5><p>ET_REL型態的elf最主要是object file<br><a href=../ET_REL_lab.zip>下載ET_REL範例</a>,裡面有2個檔案<code>function.c</code>和<code>main.c</code></p><ol><li>產生 function.c object file<pre><code>gcc -fPIC -c function.c
</code></pre></li><li>產生 main.c object file<pre><code>gcc -fPIC -c main.c
</code></pre></li><li>觀察object file的elf type<pre><code>readelf -h function.o
</code></pre><p>``</p></li></ol><h5 id=kernel-module>kernel module</h5><p><a href=../kernel_module.zip>下載kernel_module範例</a></p><p>編譯</p><pre><code>make
</code></pre><p>載入kernel module</p><pre><code>sudo insmod hello.ko
</code></pre><p>查詢kernel module已經載入了哪些</p><pre><code>sudo lsmod | grep &quot;hello&quot;
</code></pre><p>刪除kernel module</p><pre><code>sudo rmmod hello.ko
</code></pre><p>查詢printk輸出什麼</p><pre><code>dmesg
</code></pre><p>我們來觀察kernel module的elf type</p><pre><code>readelf -h hello.ko
</code></pre><h4 id=et_exec>ET_EXEC</h4><p>這種類型的執行檔載入到固定虛擬記憶體位置,所以e_entry的位置就是固定的位置</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-c:main.c data-lang=c:main.c><span class=cp>#include</span><span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span><span class=cp></span><span class=kt>int</span> <span class=nf>main</span><span class=p>(){</span>
	<span class=n>printf</span><span class=p>(</span><span class=s>&#34;Hello World</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span>
	<span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><p>編譯</p><pre><code>gcc -no-pie main.c
</code></pre><p>觀察型態</p><pre><code>readelf-h a.out 
</code></pre><h4 id=et_dyn>ET_DYN</h4><h5 id=position-independent-executable>position-independent executable</h5><p>這種類型的執行檔才可以被作業系隨機載入到不同虛擬記憶體位置</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-c:main.c data-lang=c:main.c><span class=cp>#include</span><span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span><span class=cp></span><span class=kt>int</span> <span class=nf>main</span><span class=p>(){</span>
	<span class=n>printf</span><span class=p>(</span><span class=s>&#34;Hello World</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span>
	<span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><p>編譯</p><pre><code>gcc -pie main.c
</code></pre><p>觀察型態</p><pre><code>readelf-h a.out 
</code></pre><h5 id=share-libary>share libary</h5><p>接下來繼續用剛才生成a.out來查詢share libary是哪種elf型態</p><p>查詢a.out需要動態連結哪些share libary</p><pre><code>ldd a.out
</code></pre><p>我的電腦就出現<code>/lib/x86_64-linux-gnu/libc.so.6</code></p><pre><code>linux-vdso.so.1 (0x00007ffcb0cba000)
libc.so.6 =&gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007f5f6cd3a000)
/lib64/ld-linux-x86-64.so.2 (0x00007f5f6cf4e000)
</code></pre><p>分析看看是什麼型態</p><pre><code>readelf -h /lib/x86_64-linux-gnu/libc.so.6
</code></pre><h4 id=et_core>ET_CORE</h4><p>這種型態的elf是當你的程式發生core dumped,作業系統就會吐出來<code>ET_CORE</code>的elf讓你用gdb來分析</p><p>設定core dump檔案的大小不限制</p><pre><code>ulimit -c unlimited
</code></pre><p>我們故意寫一個會出錯的程式</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-c:main.c data-lang=c:main.c><span class=cp>#include</span><span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span><span class=cp></span><span class=kt>int</span> <span class=nf>main</span><span class=p>(){</span>
        <span class=kt>int</span> <span class=o>*</span><span class=n>a</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span>
        <span class=n>printf</span><span class=p>(</span><span class=s>&#34;%d&#34;</span><span class=p>,</span><span class=o>*</span><span class=n>a</span><span class=p>);</span>
        <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><p>編譯</p><pre><code>gcc -g main.c
</code></pre><p>執行<code>a.out</code></p><pre><code>./a.out
</code></pre><p>發生<code>Segmentation fault (core dumped)</code>並且看到core這個檔案</p><p>我們來觀察<code>core</code>的type</p><pre><code>readelf -h core
</code></pre><p>我們來利用gdb與core來幫助我們分析哪裡出錯了</p><pre><code>gdb a.out core
</code></pre><h3 id=e_machine>e_machine</h3><p>這個欄位是可以知道此elf檔案是屬於哪個架構的</p><p>細節請看<a href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/include/uapi/linux/elf-em.h?h=v5.10">elf-em.h</a></p><p>其中比較特別的是近幾年比較紅的<code>RISC-V</code>,<code>BPF</code>(linux核心裡面的虛擬機,指令就是虛擬機專用的<code>bytecode</code>)</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-c data-lang=c><span class=cp>#define EM_RISCV	243	</span><span class=cm>/* RISC-V */</span><span class=cp>
</span><span class=cp>#define EM_BPF		247	</span><span class=cm>/* Linux BPF - in-kernel virtual machine */</span><span class=cp>
</span></code></pre></td></tr></table></div></div><h4 id=簡單bpf-xdp>簡單bpf xdp</h4><p>這裡小範例讓大家體會什麼是XDP</p><h5 id=安裝>安裝</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>sudo apt-get install git
sudo apt-get install clang
git clone https://github.com/libbpf/libbpf.git
</code></pre></td></tr></table></div></div><h5 id=創建檔案>創建檔案</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-c:xdp_show_icmp.c data-lang=c:xdp_show_icmp.c><span class=cp>#include</span> <span class=cpf>&lt;linux/if_ether.h&gt;//ethhdr</span><span class=cp>
</span><span class=cp>#include</span> <span class=cpf>&lt;linux/ip.h&gt;//iphdr</span><span class=cp>
</span><span class=cp>#include</span> <span class=cpf>&lt;linux/in.h&gt;//IPPROTO_ICMP</span><span class=cp>
</span><span class=cp>#include</span> <span class=cpf>&lt;linux/icmp.h&gt;//icmphdr</span><span class=cp>
</span><span class=cp>#include</span> <span class=cpf>&lt;linux/bpf.h&gt;</span><span class=cp>
</span><span class=cp>#include</span> <span class=cpf>&#34;libbpf/src/bpf_helpers.h&#34;</span><span class=cp>
</span><span class=cp></span><span class=n>SEC</span><span class=p>(</span><span class=s>&#34;show_icmp&#34;</span><span class=p>)</span>
<span class=kt>int</span> <span class=n>xdp_show_icmp</span><span class=p>(</span><span class=k>struct</span> <span class=n>xdp_md</span> <span class=o>*</span><span class=n>ctx</span><span class=p>)</span>
<span class=p>{</span>	<span class=c1>//ctx-&gt;data代表收到封包的起始記憶體位置
</span><span class=c1></span>	<span class=c1>//ctx-&gt;data_end代表收到封包的結束記憶體位置
</span><span class=c1></span>    <span class=kt>void</span> <span class=o>*</span><span class=n>data</span> <span class=o>=</span> <span class=p>(</span><span class=kt>void</span> <span class=o>*</span><span class=p>)(</span><span class=kt>long</span><span class=p>)</span><span class=n>ctx</span><span class=o>-&gt;</span><span class=n>data</span><span class=p>;</span>
	<span class=c1>//ctx-&gt;data起始記憶體位置+EtherType大小+IPv4 header大小+ICMP header大小希望小於等於結束記憶體位置
</span><span class=c1></span>	<span class=k>if</span> <span class=p>(</span><span class=n>ctx</span><span class=o>-&gt;</span><span class=n>data_end</span> <span class=o>&gt;=</span> <span class=n>ctx</span><span class=o>-&gt;</span><span class=n>data</span> <span class=o>+</span> <span class=k>sizeof</span><span class=p>(</span><span class=k>struct</span> <span class=n>ethhdr</span><span class=p>)</span><span class=o>+</span><span class=k>sizeof</span><span class=p>(</span><span class=k>struct</span> <span class=n>iphdr</span><span class=p>)</span><span class=o>+</span><span class=k>sizeof</span><span class=p>(</span><span class=k>struct</span> <span class=n>icmphdr</span><span class=p>)){</span>
		<span class=k>struct</span> <span class=n>iphdr</span> <span class=o>*</span><span class=n>ip_header</span> <span class=o>=</span> <span class=n>data</span><span class=o>+</span><span class=k>sizeof</span><span class=p>(</span><span class=k>struct</span> <span class=n>ethhdr</span><span class=p>);</span>
		<span class=c1>//確認IPv4 header的protocol是否有icmp
</span><span class=c1></span>		<span class=k>if</span><span class=p>(</span><span class=n>ip_header</span><span class=o>-&gt;</span><span class=n>protocol</span><span class=o>==</span><span class=n>IPPROTO_ICMP</span><span class=p>){</span>
		<span class=n>bpf_printk</span><span class=p>(</span><span class=s>&#34;I Get The ICMP</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span>
		<span class=p>}</span>
	<span class=p>}</span> 
    <span class=k>return</span> <span class=n>XDP_PASS</span><span class=p>;</span>
<span class=p>}</span>
<span class=kt>char</span> <span class=n>_license</span><span class=p>[]</span> <span class=n>SEC</span><span class=p>(</span><span class=s>&#34;license&#34;</span><span class=p>)</span> <span class=o>=</span> <span class=s>&#34;GPL&#34;</span><span class=p>;</span>
</code></pre></td></tr></table></div></div><h5 id=編譯bpf>編譯bpf</h5><div class="alert alert-info" role=alert data-dir=ltr>利用<code>clang</code>編譯c語言 先加入include的路徑<code>-isystem</code> 為<code>/usr/include/x86_64-linux-gnu</code> 並且優化等級為<code>-O2</code> 編譯為(<code>-target</code>) <code>bpf</code>架構的執行檔 只處理到編譯尚未處理連結(<code>-c</code>) 的檔名<code>xdp_show_icmp.c</code> 輸出(<code>-o</code>) 檔名<code>xdp_show_icmp.o</code></div><pre><code>clang -isystem /usr/include/x86_64-linux-gnu -O2 -target bpf -c xdp_show_icmp.c -o xdp_show_icmp.o
</code></pre><h5 id=觀察架構>觀察架構</h5><p>觀察此elf的指令架構</p><pre><code>readelf -h xdp_show_icmp.o
</code></pre><h5 id=設定xdp>設定XDP</h5><div class="alert alert-info" role=alert data-dir=ltr>需要root權限<code>sudo</code> 使用<code>ip</code>工具 修改網卡(<code>link</code>) 設定(<code>set</code>) 網卡(<code>dev</code>) 名稱為<code>lo</code> eneric模式(<code>xdpgeneric</code>) 從object file(<code>obj</code>) 檔名為<code>xdp_show_icmp.o</code> 的sections(<code>sec</code>) 名稱為<code>show_icmp</code>取出我們要的程式塞入核心</div><pre><code>sudo ip link set dev lo xdpgeneric obj xdp_show_icmp.o sec show_icmp
</code></pre><h5 id=開始實驗>開始實驗</h5><p>開啟終端機1</p><pre><code>sudo cat /sys/kernel/debug/tracing/trace_pipe
</code></pre><p>開啟終端機2</p><pre><code>ping 127.0.0.1
</code></pre><h3 id=e_version>e_version</h3><p><code>e_version</code>與<code>EI_VERSION</code>都是固定1</p><pre><code>The value 1 signifies the original file format; extensions will create new versions with higher numbers. The value of EV_CURRENT changes as necessary to reflect the current version number.
</code></pre><h3 id=e_entry>e_entry</h3><p>只有<code>e_type</code>為<code>ET_EXEC</code>的執行檔他的<code>e_entry</code>才值得參考<br><code>e_type</code>為<code>ET_DYN</code>的執行檔載入的虛擬記憶體位置會變動</p><h4 id=實驗e_entry>實驗e_entry</h4><p>先從<a href=#et_exec>ET_EXEC</a>準備好環境</p><p>找一下<code>Entry point address</code>的數值並且確認<code>e_type</code>為<code>ET_EXEC</code></p><pre><code>readelf -h a.out
</code></pre><p>進入gdb</p><pre><code>gdb a.out
</code></pre><p>中斷在<code>Entry point address</code></p><pre><code>b *0x1234
</code></pre><p>開始執行</p><pre><code>r
</code></pre><div class="alert alert-info" role=alert data-dir=ltr>觀察是不是中斷在<code>_start()</code>? 代表<code>elf</code>執行檔<code>e_type</code>為<code>ET_EXEC</code>的<code>Entry point address</code>是程式的進入點</div><h3 id=e_phoff>e_phoff</h3><p>紀錄<code>program header table</code>位置在哪,如果沒有就<code>0</code></p><h3 id=e_shoff>e_shoff</h3><p>紀錄<code>section header table</code>位置在哪,如果沒有就<code>0</code></p><h3 id=e_flags>e_flags</h3><p><code>processor-specific</code>這裡定義硬體的特徵,細節的定義在不同的指令架構的規格書裡面,如果是<code>RISC-V</code>可以參考[RISC-V ELF psABI specification][https://github.com/riscv/riscv-elf-psabi-doc/blob/master/riscv-elf.md#-file-header]裡面關於elf的規範</p><h3 id=e_ehsize>e_ehsize</h3><p>ELF header有多少bytes.</p><h3 id=e_phentsize>e_phentsize</h3><p>每一個program header大小有多少bytes</p><h3 id=e_phnum>e_phnum</h3><p>有多少個program header,如果沒有就為0</p><h3 id=e_shentsize>e_shentsize</h3><p>每一個section header大小有多少bytes</p><h3 id=e_shnum>e_shnum</h3><p>有多少個section header,如果沒有就為0</p><h3 id=e_shstrndx>e_shstrndx</h3><p><code>e_shstrndx</code>的數值代表,第幾個section存放<code>.shstrtab</code>這個section,<code>.shstrtab</code>很特殊負責存放所有section<code>人看的懂的名稱</code></p><p><a href=https://paper.seebug.org/89/>e_shstrndx介紹</a></p><h4 id=實驗看看>實驗看看</h4><p>準備一個elf檔案</p><p>觀察<code>Section header string table index</code>數值(<code>e_shstrndx</code>)</p><pre><code>readelf -h a.out
</code></pre><p>確認<code>.shstrtab</code>的位置是不是與<code>e_shstrndx</code>標示的一樣</p><pre><code>readelf -S a.out
</code></pre><p>直接看<code>.shstrtab</code>內容,可以發現裡存放很多字串</p><pre><code>readelf -x .shstrtab a.out
</code></pre><h2 id=program-headers>Program Headers</h2><div class="notices warning" data-title=Warning>名詞注意:一個<code>segment</code>是由一個到多個<code>section</code>組成</div><p>利用指令查看</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>readelf -l 你的檔名
</code></pre></td></tr></table></div></div><p>只有<code>executable</code>與<code>shared object files</code>的<code>Program Headers</code>才有特別的用途</p><blockquote><p><a href=https://refspecs.linuxfoundation.org/elf/gabi4+/ch5.pheader.html>Program headers are meaningful only for executable and shared object files</a></p></blockquote><p>一個elf有0或多個<code>Program Header</code>,每個<code>Program Header</code>專門處理一個<code>segment</code>載入記憶體的規劃,如果你的<code>elf檔案</code>或是某個<code>section</code>不是拿來載入記憶體執行用途可能就沒有這個header,如下範例<br><div class="notices info" data-title=Info>先準備好<a href=#et_rel>ET_REL</a>的執行檔案<br>利用<code>readelf -l function.o</code>指令觀察<code>e_type</code> 為<code>REL (Relocatable file)</code>的elf有沒有program headers?</div></p><p>每一個<code>Program Header</code>的結構如下圖</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-c data-lang=c><span class=k>typedef</span> <span class=k>struct</span> <span class=n>elf64_phdr</span> <span class=p>{</span>
  <span class=n>Elf64_Word</span> <span class=n>p_type</span><span class=p>;</span>
  <span class=n>Elf64_Word</span> <span class=n>p_flags</span><span class=p>;</span>
  <span class=n>Elf64_Off</span> <span class=n>p_offset</span><span class=p>;</span>		<span class=cm>/* Segment file offset */</span>
  <span class=n>Elf64_Addr</span> <span class=n>p_vaddr</span><span class=p>;</span>		<span class=cm>/* Segment virtual address */</span>
  <span class=n>Elf64_Addr</span> <span class=n>p_paddr</span><span class=p>;</span>		<span class=cm>/* Segment physical address */</span>
  <span class=n>Elf64_Xword</span> <span class=n>p_filesz</span><span class=p>;</span>		<span class=cm>/* Segment size in file */</span>
  <span class=n>Elf64_Xword</span> <span class=n>p_memsz</span><span class=p>;</span>		<span class=cm>/* Segment size in memory */</span>
  <span class=n>Elf64_Xword</span> <span class=n>p_align</span><span class=p>;</span>		<span class=cm>/* Segment alignment, file &amp; memory */</span>
<span class=p>}</span> <span class=n>E</span>
</code></pre></td></tr></table></div></div><h3 id=p_type>p_type</h3><p><code>Program Header</code>的型態</p><table><thead><tr><th>p_type</th><th>Value</th><th>用途</th></tr></thead><tbody><tr><td>PT_NULL</td><td>0</td><td>沒有在使用, <code>program header table</code>會忽略<code>PT_NULL</code>型態的<code>segment</code>,FIXME: 細節還需要在研究.</td></tr><tr><td>PT_LOAD</td><td>1</td><td>單純載入<code>segment</code>到虛擬記憶體,如果載入到記憶體(<code>p_memsz</code>)時比在檔案(<code>p_filesz</code>)的時候還大,多出來的地方補0,可能是為了對齊記憶體</td></tr><tr><td>PT_DYNAMIC</td><td>2</td><td>載入這個<code>segment</code>裡面都是<code>Dynamic Section</code>去虛擬記憶體</td></tr><tr><td>PT_INTERP</td><td>3</td><td>當程式需要動態連結 就需要載入這個<code>PT_INTERP</code>型態的<code>segment</code>去記憶體 並且裡面包含<code>dynamic linker/loader</code>的路徑</td></tr><tr><td>PT_NOTE</td><td>4</td><td>載入這個<code>segment</code>裡面都是<code>Note Section</code>去虛擬記憶體</td></tr><tr><td>PT_SHLIB</td><td>5</td><td>這個保留尚未定義</td></tr><tr><td>PT_PHDR</td><td>6</td><td>這個型態代表載入整個<code>Program Header Table</code>去虛擬記憶體,裡面有1個以上<code>Program Header</code></td></tr><tr><td>PT_TLS</td><td>7</td><td>載入記憶體是以<code>PT_TLS</code>型態,這個<code>segment</code>是存放<a href=https://selfboot.cn/2016/08/22/threadlocal_overview/><code>Thread-local storage</code></a>變數初始數值</td></tr><tr><td>PT_LOOS</td><td>0x60000000</td><td>從0x60000000~0x6fffffff的數值保留給作業系統使用</td></tr><tr><td>PT_HIOS</td><td>0x6fffffff</td><td>同上</td></tr><tr><td>PT_LOPROC</td><td>0x70000000</td><td>從0x70000000~0x7fffffff的數值保留給處理器使用</td></tr><tr><td>PT_HIPROC</td><td>0x7fffffff</td><td>同上</td></tr></tbody></table><h4 id=pt_interp實驗>PT_INTERP實驗</h4><ol><li><p>觀察Program Header <code>PT_INTERP</code>型態的segment</p><pre><code>readelf -l a.out
</code></pre></li><li><p>編譯此<a href=../../reverse/gdb/#%E6%9C%89%E8%B6%A3%E7%9A%84%E7%A8%8B%E5%BC%8F>範例</a>程式再觀察一次,可以發現<code>PT_INTERP</code>型態的segment不見了,go語言也是屬於這種不需要動態連結的程式,好處是有很好的可攜性,缺點是執行檔比較大,並且<code>e_type</code>屬於<code>ET_EXEC</code>代表每次都載入到固定虛擬記憶體可能有安全疑慮</p></li><li><p>修改ld-linux(<code>dynamic linker </code>)名稱會發生什麼事?<br><div class="notices warning" data-title=Warning>此實驗會毀損linux執行的過程謹慎練習<br>實驗中我的<code>Requesting program interpreter</code>是<code>/lib64/ld-linux-x86-64.so.2</code><br>如果我把<code>/lib64/ld-linux-x86-64.so.2</code>名稱改掉會怎樣?<br>是不是只有實驗2的程式才能跑?</div></p></li></ol><h4 id=pt_tls實驗>PT_TLS實驗</h4><p>參考<a href=http://weng-blog.com/2016/07/Linux-tls/>Linux Thread Local Storage</a></p><p>如下範例可以知道<code>TLS</code>(Thread Local Storage)的作法</p><p>每開起一個線程會從<code>TLS_data</code>(elf會定義這個變數存放的segment載入記憶體時<code>p_type</code>為<code>PT_TLS</code>)拿出變數的初始數值存放每個線程<code>內部</code>的<code>TLS_data</code>並且每個函數都可以直接使用<code>TLS_data</code>.</p><p>好處可以看到<code>TLS</code>版本不用傳遞參數給函數就可以直接使用,</p><div id=012721058491b074 class=codetab><div class=codetab__links><button class=codetab__link aria-label="Tab link">NO_TLS</button>
<button class=codetab__link aria-label="Tab link">TLS</button></div><div id=a52fd6f834ae51e0 class=codetab__content><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=hl><span class=lnt> 5
</span></span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=hl><span class=lnt>11
</span></span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-c data-lang=c><span class=cp>#define  NUMTHREADS   2 
</span><span class=cp>#include</span> <span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span><span class=cp>#include</span> <span class=cpf>&lt;stdlib.h&gt;</span><span class=cp>
</span><span class=cp>#include</span> <span class=cpf>&lt;pthread.h&gt;</span><span class=cp>
</span><span class=hl><span class=cp></span><span class=kt>void</span> <span class=nf>show_tls</span><span class=p>(</span><span class=kt>int</span> <span class=n>local_data</span><span class=p>)</span> <span class=p>{</span>
</span>    <span class=n>printf</span><span class=p>(</span><span class=s>&#34;線程 %.16lx: TLS data=%d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span><span class=n>pthread_self</span><span class=p>(),</span> <span class=n>local_data</span><span class=p>);</span>
<span class=p>}</span>
<span class=kt>void</span> <span class=o>*</span><span class=nf>thread_run</span><span class=p>(</span><span class=kt>int</span> <span class=n>i</span><span class=p>)</span>
<span class=p>{</span>
   <span class=kt>int</span> <span class=n>local_data</span> <span class=o>=</span> <span class=n>i</span><span class=p>;</span>
<span class=hl>   <span class=n>show_tls</span><span class=p>(</span><span class=n>local_data</span><span class=p>);</span>
</span>   <span class=k>return</span> <span class=nb>NULL</span><span class=p>;</span>
<span class=p>}</span>
<span class=kt>int</span> <span class=nf>main</span><span class=p>(</span><span class=kt>int</span> <span class=n>argc</span><span class=p>,</span> <span class=kt>char</span> <span class=o>**</span><span class=n>argv</span><span class=p>)</span>
<span class=p>{</span>
  <span class=n>pthread_t</span>             <span class=kr>thread</span><span class=p>[</span><span class=n>NUMTHREADS</span><span class=p>];</span>
  <span class=kt>int</span>                   <span class=n>rc</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span>
  <span class=n>printf</span><span class=p>(</span><span class=s>&#34;開始執行</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span>
  <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>NUMTHREADS</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span> 
     <span class=n>rc</span> <span class=o>=</span> <span class=n>pthread_create</span><span class=p>(</span><span class=o>&amp;</span><span class=kr>thread</span><span class=p>[</span><span class=n>i</span><span class=p>],</span> <span class=nb>NULL</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>thread_run</span><span class=p>,</span> <span class=n>i</span><span class=p>);</span>
  <span class=p>}</span>
  <span class=n>printf</span><span class=p>(</span><span class=s>&#34;執行中..</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span>
  <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>NUMTHREADS</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
     <span class=n>rc</span> <span class=o>=</span> <span class=n>pthread_join</span><span class=p>(</span><span class=kr>thread</span><span class=p>[</span><span class=n>i</span><span class=p>],</span> <span class=nb>NULL</span><span class=p>);</span>  
  <span class=p>}</span>
  <span class=n>printf</span><span class=p>(</span><span class=s>&#34;執行完成</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span>
  <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
<span class=p>}</span></code></pre></td></tr></table></div></div></div><div id=24a9e4081bbf77d5 class=codetab__content><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=hl><span class=lnt> 6
</span></span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=hl><span class=lnt>12
</span></span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-c data-lang=c><span class=cp>#define  NUMTHREADS   2 
</span><span class=cp>#include</span> <span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span><span class=cp>#include</span> <span class=cpf>&lt;stdlib.h&gt;</span><span class=cp>
</span><span class=cp>#include</span> <span class=cpf>&lt;pthread.h&gt;</span><span class=cp>
</span><span class=cp></span><span class=n>__thread</span> <span class=kt>int</span> <span class=n>TLS_data</span><span class=o>=</span><span class=mi>87</span><span class=p>;</span>
<span class=hl><span class=kt>void</span> <span class=nf>show_tls</span><span class=p>()</span> <span class=p>{</span>
</span>    <span class=n>printf</span><span class=p>(</span><span class=s>&#34;線程 %.16lx: TLS data=%d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span><span class=n>pthread_self</span><span class=p>(),</span> <span class=n>TLS_data</span><span class=p>);</span>
<span class=p>}</span>
<span class=kt>void</span> <span class=o>*</span><span class=nf>thread_run</span><span class=p>(</span><span class=kt>int</span> <span class=n>i</span><span class=p>)</span>
<span class=p>{</span>
   <span class=n>TLS_data</span> <span class=o>=</span> <span class=n>i</span><span class=p>;</span>
<span class=hl>   <span class=n>show_tls</span><span class=p>();</span>
</span>   <span class=k>return</span> <span class=nb>NULL</span><span class=p>;</span>
<span class=p>}</span>
<span class=kt>int</span> <span class=nf>main</span><span class=p>(</span><span class=kt>int</span> <span class=n>argc</span><span class=p>,</span> <span class=kt>char</span> <span class=o>**</span><span class=n>argv</span><span class=p>)</span>
<span class=p>{</span>
  <span class=n>pthread_t</span>             <span class=kr>thread</span><span class=p>[</span><span class=n>NUMTHREADS</span><span class=p>];</span>
  <span class=kt>int</span>                   <span class=n>rc</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span>
  <span class=n>printf</span><span class=p>(</span><span class=s>&#34;開始執行</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span>
  <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>NUMTHREADS</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span> 
     <span class=n>rc</span> <span class=o>=</span> <span class=n>pthread_create</span><span class=p>(</span><span class=o>&amp;</span><span class=kr>thread</span><span class=p>[</span><span class=n>i</span><span class=p>],</span> <span class=nb>NULL</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>thread_run</span><span class=p>,</span> <span class=n>i</span><span class=p>);</span>
  <span class=p>}</span>
  <span class=n>printf</span><span class=p>(</span><span class=s>&#34;執行中..</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span>
  <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>NUMTHREADS</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
     <span class=n>rc</span> <span class=o>=</span> <span class=n>pthread_join</span><span class=p>(</span><span class=kr>thread</span><span class=p>[</span><span class=n>i</span><span class=p>],</span> <span class=nb>NULL</span><span class=p>);</span>  
  <span class=p>}</span>
  <span class=n>printf</span><span class=p>(</span><span class=s>&#34;執行完成</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span>
  <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
<span class=p>}</span></code></pre></td></tr></table></div></div></div></div><script>'use strict';var containerId=JSON.parse('"012721058491b074"'),containerElem=document.getElementById(containerId),codetabLinks=null,codetabContents=null,ids=[],i;containerElem&&(codetabLinks=containerElem.querySelectorAll('.codetab__link'),codetabContents=containerElem.querySelectorAll('.codetab__content'));for(i=0;i<codetabContents.length;i++)ids=ids.concat(codetabContents[i].getAttribute('id')),codetabContents[i].style.display='none',0===parseInt(i,10)&&!codetabContents[i].classList.contains('active')&&codetabContents[i].classList.add('active');for(i=0;i<codetabLinks.length;i++)codetabLinks[i].setAttribute('id',ids[i]),0===parseInt(i,10)&&!codetabLinks[i].classList.contains('active')?codetabLinks[i].classList.add('active'):codetabLinks[i].classList.remove('active');codetabContents.length>0&&(codetabContents[0].style.display='block')</script><p>編譯</p><pre><code>gcc t.c -lpthread
</code></pre><h3 id=p_flags>p_flags</h3><p>定義這個區塊的<code>segment</code>在記憶體的權限 最後3個bit定義 讀/寫/執行</p><p>舉例<br>可讀/不可寫/可執行<br>0x00000000000000000000000000000101(32bit)</p><p>可讀/可寫/可執行<br>0x00000000000000000000000000000111(32bit)</p><h3 id=p_offset>p_offset</h3><p>定義這個<code>segment</code>在檔案哪個位置開始</p><h3 id=p_vaddr>p_vaddr</h3><p>定義這個<code>segment</code>載入到虛擬記憶體的哪個位置,只有沒有經過ASLR(Address space layout randomization)載入的執行檔(<code>e_type</code>為<code>ET_EXEC</code>的執行檔),這個數值才有參考價值</p><h3 id=p_paddr>p_paddr</h3><p>定義這個<code>segment</code>載入到實體記憶體的哪個位置,因為實體記憶體被作業系統保護所以這個數值不準確.</p><h3 id=p_filesz>p_filesz</h3><p>定義這個<code>segment</code>在檔案的大小多少bytes,可為0</p><h3 id=p_memsz>p_memsz</h3><p>定義這個<code>segment</code>在虛擬記憶體的大小多少bytes,可為0</p><h3 id=p_align>p_align</h3><h2 id=section-headers>Section Headers</h2><p>利用指令查看</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>readelf -S 你的檔名
</code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-c data-lang=c><span class=k>typedef</span> <span class=k>struct</span> <span class=n>elf64_shdr</span> <span class=p>{</span>
  <span class=n>Elf64_Word</span> <span class=n>sh_name</span><span class=p>;</span>		<span class=cm>/* Section name, index in string tbl */</span>
  <span class=n>Elf64_Word</span> <span class=n>sh_type</span><span class=p>;</span>		<span class=cm>/* Type of section */</span>
  <span class=n>Elf64_Xword</span> <span class=n>sh_flags</span><span class=p>;</span>		<span class=cm>/* Miscellaneous section attributes */</span>
  <span class=n>Elf64_Addr</span> <span class=n>sh_addr</span><span class=p>;</span>		<span class=cm>/* Section virtual addr at execution */</span>
  <span class=n>Elf64_Off</span> <span class=n>sh_offset</span><span class=p>;</span>		<span class=cm>/* Section file offset */</span>
  <span class=n>Elf64_Xword</span> <span class=n>sh_size</span><span class=p>;</span>		<span class=cm>/* Size of section in bytes */</span>
  <span class=n>Elf64_Word</span> <span class=n>sh_link</span><span class=p>;</span>		<span class=cm>/* Index of another section */</span>
  <span class=n>Elf64_Word</span> <span class=n>sh_info</span><span class=p>;</span>		<span class=cm>/* Additional section information */</span>
  <span class=n>Elf64_Xword</span> <span class=n>sh_addralign</span><span class=p>;</span>	<span class=cm>/* Section alignment */</span>
  <span class=n>Elf64_Xword</span> <span class=n>sh_entsize</span><span class=p>;</span>	<span class=cm>/* Entry size if section holds table */</span>
<span class=p>}</span> <span class=n>Elf64_Shdr</span><span class=p>;</span>
</code></pre></td></tr></table></div></div><h3 id=sh_name>sh_name</h3><p><code>sh_name</code>存放名稱的index</p><p>section的名稱字串存在<code>.shstrtab</code></p><h3 id=sh_type>sh_type</h3><table><thead><tr><th>Name</th><th>Value</th><th>用途</th></tr></thead><tbody><tr><td>SHT_NULL</td><td>0</td><td>這個型態代表這個section header無效</td></tr><tr><td>SHT_PROGBITS</td><td>1</td><td>這裡面的section放程式執行用到的東西</td></tr><tr><td>SHT_SYMTAB</td><td>2</td><td>這裡面的section放symbol table FIXME <a href=https://refspecs.linuxfoundation.org/elf/gabi4+/ch4.symtab.html>Symbol Table</a></td></tr><tr><td>SHT_STRTAB</td><td>3</td><td>這裡面的section放滿人可以看得懂的字串,例如可以拿來表示section的名稱,</td></tr><tr><td>SHT_RELA</td><td>4</td><td>給object file重定位資訊用的(with explicit addends) FIXME:<a href=https://refspecs.linuxfoundation.org/elf/gabi4+/ch4.reloc.html>Relocation</a></td></tr><tr><td>SHT_HASH</td><td>5</td><td>這個section給symbol table使用</td></tr><tr><td>SHT_DYNAMIC</td><td>6</td><td>這裡放動態連結的訊息 FIXME:<a href=https://refspecs.linuxfoundation.org/elf/gabi4+/ch5.dynamic.html#dynamic_section>Dynamic Section</a></td></tr><tr><td>SHT_NOTE</td><td>7</td><td>這裡檔案的訊息 FIXME:<a href=https://refspecs.linuxfoundation.org/elf/gabi4+/ch5.pheader.html#note_section>Note Section</a></td></tr><tr><td>SHT_NOBITS</td><td>8</td><td>代表這個section在檔案裡面沒有佔用任何大小,它只有section header而已</td></tr><tr><td>SHT_REL</td><td>9</td><td>給object file重定位資訊用的(without explicit addends) FIXME:<a href=https://refspecs.linuxfoundation.org/elf/gabi4+/ch4.reloc.html>Relocation</a></td></tr><tr><td>SHT_SHLIB</td><td>10</td><td>這個保留尚未定義</td></tr><tr><td>SHT_DYNSYM</td><td>11</td><td>這裡面的section放symbol table</td></tr><tr><td>SHT_INIT_ARRAY</td><td>14</td><td>裡面有陣列記憶體位置,指向主程式開始前的函數FIXME:<a href=https://refspecs.linuxfoundation.org/elf/gabi4+/ch5.dynamic.html#init_fini>Initialization and Termination Functions</a></td></tr><tr><td>SHT_FINI_ARRAY</td><td>15</td><td>裡面有陣列記憶體位置,指向主程式結束後要執行的函數,<code>atexit</code> FIXME:<a href=https://refspecs.linuxfoundation.org/elf/gabi4+/ch5.dynamic.html#init_fini>Initialization and Termination Functions</a></td></tr><tr><td>SHT_PREINIT_ARRAY</td><td>16</td><td>裡面有陣列記憶體位置指向函數,這個函數會在<code>SHT_INIT_ARRAY</code>裡面所有函數執行之前執行</td></tr><tr><td>SHT_GROUP</td><td>17</td><td></td></tr><tr><td>SHT_SYMTAB_SHNDX</td><td>18</td><td></td></tr><tr><td>SHT_LOOS</td><td>0x60000000</td><td>從0x60000000~0x6fffffff的數值保留給作業系統使用</td></tr><tr><td>SHT_HIOS</td><td>0x6fffffff</td><td>同上</td></tr><tr><td>SHT_LOPROC</td><td>0x70000000</td><td>從0x70000000~0x7fffffff的數值保留給處理器使用</td></tr><tr><td>SHT_HIPROC</td><td>0x7fffffff</td><td>同上</td></tr><tr><td>SHT_LOUSER</td><td>0x80000000</td><td>從0x80000000~0xffffffff的數值保留給應用程式使用</td></tr><tr><td>SHT_HIUSER</td><td>0xffffffff</td><td>同上</td></tr></tbody></table><h4 id=initialization-and-termination-functions>Initialization and Termination Functions</h4><p>尚未完成<br>這裡深入探討<code>SHT_PREINIT_ARRAY</code>,<code>SHT_FINI_ARRAY</code>,<code>SHT_INIT_ARRAY</code></p><h3 id=sh_flags>sh_flags</h3><table><thead><tr><th>Name</th><th>Value</th><th>用途</th></tr></thead><tbody><tr><td>SHF_WRITE</td><td>0x1</td><td>程式執行時這個section可寫</td></tr><tr><td>SHF_ALLOC</td><td>0x2</td><td>程式執行時這個section會佔用記憶體</td></tr><tr><td>SHF_EXECINSTR</td><td>0x4</td><td>這個section包含機械碼</td></tr><tr><td>SHF_MERGE</td><td>0x10</td><td></td></tr><tr><td>SHF_STRINGS</td><td>0x20</td><td>包含以零結尾的字符串組成</td></tr><tr><td>SHF_INFO_LINK</td><td>0x40</td><td></td></tr><tr><td>SHF_LINK_ORDER</td><td>0x80</td><td></td></tr><tr><td>SHF_OS_NONCONFORMING</td><td>0x100</td><td></td></tr><tr><td>SHF_GROUP</td><td>0x200</td><td></td></tr><tr><td>SHF_TLS</td><td>0x400</td><td></td></tr><tr><td>SHF_MASKOS</td><td>0x0ff00000</td><td>保留給作業系統使用</td></tr><tr><td>SHF_MASKPROC</td><td>0xf0000000</td><td>保留給處理器使用</td></tr></tbody></table><h3 id=sh_addr>sh_addr</h3><p>此section在執行時的記憶體哪個位置<br>0代表沒有在記憶體中</p><h3 id=sh_offset>sh_offset</h3><p>此section在檔案時哪個位置</p><h3 id=sh_size>sh_size</h3><p>代表section在檔案的大小<br><div class="notices warning" data-title=Warning>如果<code>sh_type</code>為<code>SHT_NOBITS</code>,雖然檔案沒有存放,但是sh_size可能不為0<br>舉例<br>c語言還沒初始化的變數放在<code>.bss section</code>屬於<code>SHT_NOBITS</code>在檔案沒佔空間(只有section header)但載入記憶體後要佔空間</div></p><h3 id=sh_link>sh_link</h3><h3 id=sh_info>sh_info</h3><h3 id=sh_addralign>sh_addralign</h3><p>此section要對齊記憶體<br>必須讓sh_addr數值剛好,sh_addr/sh_addralign整除才能對齊<br>記憶體對齊可以增加效能,或是對齊cache避免<a href=https://en.wikipedia.org/wiki/False_sharing>False_sharing</a></p><h3 id=sh_entsize>sh_entsize</h3><h2 id=special-sections>Special Sections</h2><p>這個部份負責探討特殊Sections在幹麻<br>這個部份尚未完成</p><h3 id=relocation>Relocation</h3><p>重定位,用在靜態連結動態連結</p><p>現在流行可攜性高的程式很多程式golange</p><table><thead><tr><th>重定位方式</th><th>效能</th><th>檔案大小</th><th></th></tr></thead><tbody><tr><td>靜態連結</td><td>快</td><td>大</td><td></td></tr><tr><td>動態連結</td><td>中</td><td></td><td></td></tr><tr><td>動態載入</td><td></td><td></td><td></td></tr></tbody></table><h4 id=types>Types</h4><p>關於Relocation Types (Processor-Specific)是屬於每個指令架構abi所定義,而我們目前只討論AMD64的細節,文件<a href=https://refspecs.linuxfoundation.org/elf/x86_64-abi-0.99.pdf>System V Application Binary Interface AMD64 Architecture Processor Supplement</a>有定義elf-Processor-Specific的規範</p><p>procedure linkage table</p><h2 id=進階練習>進階練習</h2><p>學完elf後,如何從這個<a href=../../reverse/gdb/#%E6%9C%89%E8%B6%A3%E7%9A%84%E7%A8%8B%E5%BC%8F>範例</a>刪減elf執行檔的大小又可以執行?</p><p>可以作答在最下面的討論區</p><p>可以參考<a href=https://web.archive.org/web/20210415124218/http://www.muppetlabs.com/~breadbox/software/tiny/teensy.html>A Whirlwind Tutorial on Creating Really Teensy ELF Executables for Linux</a></p><p><a href=https://lief.quarkslab.com/>lief工具修改</a></p><h2 id=參考>參考</h2><p>[操作系统真象还原-5.3.3 elf 格式的二进制文件]<br>[Learning Linux Binary Analysis]<br><a href=https://web.archive.org/web/20171120151138/https://eklitzke.org/position-independent-executables>The Curious Case of Position Independent Executables</a><br><a href=https://web.archive.org/web/20201130173004/https://developer.aliyun.com/article/65363>APP漏洞扫描器之未使用地址空间随机化</a><br><a href=https://web.archive.org/web/20190916092435/http://nano-chicken.blogspot.com/2011/07/elf02-elf-header.html>ELF之學習心得02 - ELF Header(e_ident篇)</a></p><p><a href=https://refspecs.linuxfoundation.org/elf/gabi4+/ch4.eheader.html>ELF Header</a></p></article><script defer src=/js/clipboard.min.1626706afc88d95ebe1173b553ec732c6dc82a576989315fdf5e7779af738a44.js></script><script defer src=/js/helper/prev.min.js></script><script defer src=/js/helper/prop.min.js></script><script>'use strict';document.addEventListener('DOMContentLoaded',function(){var a=!1,b=document.querySelectorAll('pre.chroma'),c=document.querySelectorAll('.language-code'),d=document.querySelectorAll('div.language-\\$'),e=document.querySelectorAll('div.language-\\>'),f=function(c){var k=c,b=c.textContent,j,g,h,i,d,f,e;if(b.length>15){a||(j=new ClipboardJS('.copy-to-clipboard',{text:function(a){var c=prev(a).querySelectorAll('code');return c.length>1?b=prev(a).querySelector('code[class^="language-"]').textContent:b=prev(a).querySelector('code').textContent,b.replace(/^\$\s/gm,'')}}),j.on('success',function(a){a.clearSelection(),g=prop(a.trigger.parentNode,'tagName')=='PRE',a.trigger.setAttribute('aria-label','Copied to clipboard!'),a.trigger.classList.add('tooltipped'),a.trigger.classList.add('tooltipped-w')}),j.on('error',function(a){g=prop(a.trigger.parentNode,'tagName')=='PRE',a.trigger.setAttribute('aria-label',a.action.toString()),a.trigger.classList.add('tooltipped'),a.trigger.classList.add('tooltipped-w')}),a=!0),h=['language-mermaid','language-viz','language-wave','language-chart','language-msc','language-flowchart'],i=!1,d=k.getAttribute('class');for(f=0;f<h.length;f++)if(d&&d.startsWith(h[f])){i=!0;break}i||d&&(e=document.createElement('span'),e.setAttribute('class','copy-to-clipboard'),e.setAttribute('title','Copy to clipboard'),c.parentNode.parentNode.insertBefore(e,c.parentNode.nextElementSibling))}},g=function(b){var a=document.createElement('span');a.setAttribute('class','copy-to-clipboard'),a.setAttribute('title','Copy to clipboard'),b.parentNode.parentNode.insertBefore(a,b.parentNode.nextElementSibling)};b?b.forEach(function(a){a.querySelectorAll('code').forEach(function(a){f(a)})}):null,c?c.forEach(function(a){a.querySelectorAll('code').forEach(function(a){f(a)})}):null,d?d.forEach(function(a){a.querySelectorAll('code').forEach(function(a){g(a)})}):null,e?e.forEach(function(a){a.querySelectorAll('code').forEach(function(a){g(a)})}):null})</script><script>'use strict';var langCodeElem,dollarCodeElem,gtCodeElem;function wrap(a,b){a.parentNode.insertBefore(b,a),b.appendChild(a)}(function(){var a=document.querySelector('.single__contents');a?a.querySelectorAll('pre > code').forEach(function(b){var a=b.getAttribute('data-lang'),c=document.createElement('div'),e=null,d=null;a&&a.includes(':')?(e=a.split(':')[0],d=a.split(':')[1],c.className='language-'+e,c.setAttribute('data-lang',d),b.className='language-'+e,b.setAttribute('data-lang',d),b.setAttribute('id',d)):a||(c.setAttribute('data-lang','Code'),c.className='language-code'),(!a||d)&&wrap(b.parentNode,c)}):null})(),langCodeElem=document.querySelectorAll('.language-code'),langCodeElem?langCodeElem.forEach(function(b){var a=document.createElement('span');a.className='copy-to-clipboard',a.setAttribute('title','Copy to clipboard'),b.append(a)}):null,dollarCodeElem=document.querySelectorAll('div.language-\\$'),gtCodeElem=document.querySelectorAll('div.language-\\>'),dollarCodeElem?dollarCodeElem.forEach(function(a){var b=a.parentNode.parentNode?a.parentNode.parentNode.querySelectorAll('.lnt'):null;b?b.forEach(function(a){a.innerHTML='$<br/>'}):null}):null,gtCodeElem?gtCodeElem.forEach(function(a){var b=a.parentNode.parentNode?a.parentNode.parentNode.querySelectorAll('.lnt'):null;b?b.forEach(function(a){a.innerHTML='><br/>'}):null}):null</script><div class=donation><div class=donation__message>Share on</div><div class=donation__icons><a href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2flu-yi-hsun.github.io%2fposts%2flinux%2felf%2f" title=Facebook aria-label="Facebook Share Button" class=donation__item target=_blank rel=noreferrer data-type=share><svg data-name="facebook" enable-background="new 0 0 24 24" viewBox="0 0 24 24" width="35" height="35" fill="currentcolor" xmlns="http://www.w3.org/2000/svg"><path d="m15.997 3.985h2.191V.169c-.378-.052-1.678-.169-3.192-.169-3.159.0-5.323 1.987-5.323 5.639V9H6.187v4.266h3.486V24h4.274V13.267h3.345l.531-4.266h-3.877V6.062c.001-1.233.333-2.077 2.051-2.077z"/></svg></a><a href="https://twitter.com/intent/tweet?text=elf&url=https%3a%2f%2flu-yi-hsun.github.io%2fposts%2flinux%2felf%2f&hashtags=binary%2c%e7%b3%bb%e7%b5%b1%e7%a8%8b%e5%bc%8f%2c%e5%ae%89%e5%85%a8&via=" title=Twitter aria-label="Twitter Share Button" class=donation__item target=_blank rel=noreferrer data-type=share><svg data-name="twitter" enable-background="new 0 0 24 24" viewBox="0 0 24 24" width="35" height="35" fill="currentcolor" xmlns="http://www.w3.org/2000/svg"><path d="m21.534 7.113C22.51 6.42 23.331 5.555 24 4.559v-.001c-.893.391-1.843.651-2.835.777 1.02-.609 1.799-1.566 2.165-2.719-.951.567-2.001.967-3.12 1.191-.903-.962-2.19-1.557-3.594-1.557-2.724.0-4.917 2.211-4.917 4.921.0.39.033.765.114 1.122-4.09-.2-7.71-2.16-10.142-5.147-.424.737-.674 1.58-.674 2.487.0 1.704.877 3.214 2.186 4.089-.791-.015-1.566-.245-2.223-.606v.054c0 2.391 1.705 4.377 3.942 4.835-.401.11-.837.162-1.29.162-.315.0-.633-.018-.931-.084.637 1.948 2.447 3.381 4.597 3.428-1.674 1.309-3.8 2.098-6.101 2.098-.403.0-.79-.018-1.177-.067 2.18 1.405 4.762 2.208 7.548 2.208 8.683.0 14.342-7.244 13.986-14.637z"/></svg></a></div></div><div class=whoami__gutter></div><hr class="hr-slash whoami-hr"><section class=whoami><div class=whoami__image-wrapper><img data-src=/images/whoami/avatar.jpg src="data:image/svg+xml,%0A%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath fill='none' d='M0 0h24v24H0V0z'/%3E%3Cpath fill='%23aaa' d='M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-1 16H6c-.55 0-1-.45-1-1V6c0-.55.45-1 1-1h12c.55 0 1 .45 1 1v12c0 .55-.45 1-1 1zm-4.44-6.19l-2.35 3.02-1.56-1.88c-.2-.25-.58-.24-.78.01l-1.74 2.23c-.26.33-.02.81.39.81h8.98c.41 0 .65-.47.4-.8l-2.55-3.39c-.19-.26-.59-.26-.79 0z'/%3E%3C/svg%3E" alt=呂奕珣 class="lazyload whoami__image"></div><div class=whoami__contents><div class=whoami__written-by>WRITTEN BY</div><div class=whoami__title>呂奕珣</div><div class=whoami__desc>SDN ML FINTECH HFT</div><div class=whoami__social><a href=mailto:yihsun1992@gmail.com title=email aria-label=email><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path fill="currentcolor" d="M20 4H4c-1.1.0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1.0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-.4 4.25-7.07 4.42c-.32.2-.74.2-1.06.0L4.4 8.25c-.25-.16-.4-.43-.4-.72.0-.67.73-1.07 1.3-.72L12 11l6.7-4.19c.57-.35 1.3.05 1.3.72.0.29-.15.56-.4.72z"/></svg></a><a href="https://www.facebook.com/profile.php?id=100001559307331" title=facebook aria-label=facebook><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="25" viewBox="0 0 24 24"><g id="surface2747"><path fill="currentcolor" d="M11.664062 2.003906C6.621094 2.171875 2.375 6.25 2.023438 11.289062c-.367188 5.328126 3.445312 9.832032 8.484374 10.589844V14.648438H8.890625C8.164062 14.648438 7.578125 14.0625 7.578125 13.335938c0-.726563000000001.585937-1.3125 1.3125-1.3125h1.613281v-1.75c0-2.894532 1.410156-4.167969 3.820313-4.167969C14.679688 6.105469 14.984375 6.113281 15.242188 6.128906 15.878906 6.15625 16.371094 6.6875 16.371094 7.324219c0 .664062-.535155999999999 1.199219-1.199219 1.199219H14.730469c-1.019531.0-1.378907.96875-1.378907 2.0625v1.4375h1.871094c.589843999999999.0 1.042969.527343.953125 1.109374L16.066406 13.835938C15.992188 14.304688 15.589844 14.652344 15.113281 14.652344H13.351562v7.246094C18.234375 21.234375 22 17.0625 22 12c0-5.632812-4.660156-10.179688-10.335938-9.996094zm0 0"/></g></svg></a><a href=https://github.com/Lu-Yi-Hsun title=github aria-label=github><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="25" viewBox="0 0 24 24"><g id="surface3680"><path fill="currentcolor" d="M10.898438 2.101562c-4.597657.5-8.296876 4.199219-8.796876 8.699219-.5 4.699219 2.199219 8.898438 6.296876 10.5C8.699219 21.398438 9 21.199219 9 20.800781V19.199219S8.601562 19.300781 8.101562 19.300781c-1.402343.0-2-1.199219-2.101562-1.902343C5.898438 17 5.699219 16.699219 5.398438 16.398438 5.101562 16.300781 5 16.300781 5 16.199219 5 16 5.300781 16 5.398438 16 6 16 6.5 16.699219 6.699219 17c.5.800781000000001 1.101562 1 1.402343 1C8.5 18 8.800781 17.898438 9 17.800781 9.101562 17.101562 9.398438 16.398438 10 16c-2.300781-.5-4-1.800781-4-4 0-1.101562.5-2.199219 1.199219-3C7.101562 8.800781 7 8.300781 7 7.601562c0-.402343.0-1 .300781-1.601562.0.0 1.398438.0 2.800781 1.300781C10.601562 7.101562 11.300781 7 12 7s1.398438.101562 2 .300781C15.300781 6 16.800781 6 16.800781 6 17 6.601562 17 7.199219 17 7.601562 17 8.398438 16.898438 8.800781 16.800781 9 17.5 9.800781 18 10.800781 18 12c0 2.199219-1.699219 3.5-4 4 .601562.5 1 1.398438 1 2.300781v2.597657C15 21.199219 15.300781 21.5 15.699219 21.398438 19.398438 19.898438 22 16.300781 22 12.101562c0-6-5.101562-10.703124-11.101562-10zm0 0"/></g></svg></a><a href="https://api.whatsapp.com/send/?phone=8860978711793&text&app_absent=0" title=whatsapp aria-label=whatsapp><svg data-name="whatsapp" fill="currentcolor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="25" height="25"><path d="M12.011719 2C6.5057187 2 2.0234844 6.478375 2.0214844 11.984375 2.0204844 13.744375 2.4814687 15.462563 3.3554688 16.976562L2 22l5.2324219-1.236328C8.6914219 21.559672 10.333859 21.977516 12.005859 21.978516H12.009766c5.505.0 9.985281-4.479375 9.988281-9.984375C22.000047 9.3251406 20.962172 6.8157344 19.076172 4.9277344 17.190172 3.0407344 14.683719 2.001 12.011719 2zM12.009766 4C14.145766 4.001 16.153109 4.8337969 17.662109 6.3417969c1.509 1.51 2.337938 3.5163906 2.335938 5.6503911C19.996047 16.396187 16.413812 19.978516 12.007812 19.978516 10.674812 19.977516 9.3544062 19.642812 8.1914062 19.007812L7.5175781 18.640625 6.7734375 18.816406 4.8046875 19.28125l.4804687-1.785156L5.5019531 16.695312 5.0878906 15.976562c-.698-1.208-1.0674062-2.589187-1.0664062-3.992187C4.0234844 7.582375 7.6067656 4 12.009766 4zM8.4765625 7.375c-.167.0-.437015600000001.0625-.6660156.3125-.229.249-.875.8520781-.875 2.0800781.0 1.2279999.894531199999999 2.4150309 1.0195312 2.5820309C8.0790781 12.515609 9.68175 15.115234 12.21875 16.115234c2.108.831 2.536141.666999999999998 2.994141.625C15.670891 16.699234 16.690438 16.137687 16.898438 15.554688 17.106437 14.971687 17.106922 14.470187 17.044922 14.367188 16.982922 14.263188 16.816406 14.201172 16.566406 14.076172c-.249000000000002-.125-1.476078-.727547-1.705078-.810547-.229000000000001-.0830000000000002-.3965-.125-.5625.125S13.655766 14.201187 13.509766 14.367188C13.363766 14.534188 13.21875 14.556641 12.96875 14.431641 12.71875 14.305641 11.914938 14.041406 10.960938 13.191406 10.218937 12.530406 9.7182656 11.714844 9.5722656 11.464844 9.4272656 11.215844 9.5585938 11.079078 9.6835938 10.955078c.112-.112.248046799999999-.291500000000001.3730472-.4375C10.180641 10.371578 10.223641 10.267562 10.306641 10.101562 10.389641 9.9355625 10.347156 9.7890625 10.285156 9.6640625 10.223156 9.5390625 9.737625 8.3065 9.515625 7.8125 9.328625 7.3975 9.131125 7.3878594 8.953125 7.3808594 8.808125 7.3748594 8.6425625 7.375 8.4765625 7.375z"/></svg></a></div></div></section><hr class="hr-slash whoami-hr"><section class=related><h1 class=related__title><hr class=hr-dots><div>See Also</div><hr class=hr-dots></h1><ul class=related-ul><li><a href=/posts/reverse/gdb/ class=related__link>gdb</a></li><li><a href=/posts/linux/canary/ class=related__link>canary analysis</a></li><li><a href=/posts/linux/exec/ class=related__link>執行檔案過程</a></li><li><a href=/posts/linux/lcm/ class=related__link>linux security module</a></li><li><a href=/posts/reverse/ftrace/ class=related__link>ftrace</a></li></ul></section><div class=grow></div><nav class=pagination-single><a href=https://lu-yi-hsun.github.io/posts/reverse/ftrace/ class=pagination-single__left><div class=pagination-single__icon><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path fill="currentcolor" d="M19 11H7.83l4.88-4.88c.39-.39.39-1.03.0-1.42s-1.02-.39-1.41.0l-6.59 6.59c-.39.39-.39 1.02.0 1.41l6.59 6.59c.39.39 1.02.39 1.41.0s.39-1.02.0-1.41L7.83 13H19c.55.0 1-.45 1-1s-.45-1-1-1z"/></svg></div><div class=pagination-single__left-title>ftrace</div></a><div class=grow></div><a href=https://lu-yi-hsun.github.io/posts/linux/canary/ class=pagination-single__right><div class=pagination-single__right-title>canary analysis</div><div class=pagination-single__icon><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path fill="currentcolor" d="M5 13h11.17l-4.88 4.88c-.39.39-.39 1.03.0 1.42.39.39 1.02.39 1.41.0l6.59-6.59c.39-.39.39-1.02.0-1.41l-6.58-6.6c-.39-.39-1.02-.39-1.41.0s-.39 1.02.0 1.41L16.17 11H5c-.55.0-1 .45-1 1s.45 1 1 1z"/></svg></div></a></nav><div id=utterances></div><noscript>Please enable JavaScript to view the <a href=https://github.com/utterance>comments powered by utterances.</a></noscript><script>document.addEventListener('DOMContentLoaded',function(){var b,c,d,e,f,a;function g(b,c){var a=b||c;return a==="dark"?"photon-dark":a==="hacker"?"photon-dark":a==="kimbie"?"github-dark-orange":"github-light"}try{b=JSON.parse('"Lu-Yi-Hsun"'),c=JSON.parse('"lu-yi-hsun.github.io"'),d=JSON.parse('"dark"'),e=localStorage.getItem('theme'),f=g(e,d),a=document.createElement('script'),a.setAttribute('src','https://utteranc.es/client.js'),a.setAttribute('repo',`${b}/${c}`),a.setAttribute('issue-term','pathname'),a.setAttribute('theme',f),a.setAttribute('crossorigin','anonymous'),a.setAttribute('async',''),a.onload=function(){},document.getElementById('utterances').appendChild(a)}catch(a){console.log(a)}})</script><div id=comments-fallback class=viaemail><div class=utterances__message><a href=https://github.com/Lu-Yi-Hsun/lu-yi-hsun.github.io/issues/ target=_blank rel=noreferrer>&nbsp;</a></div></div><div class="modal micromodal-slide" id=modal aria-hidden=true><div class=modal__overlay tabindex=-1 data-micromodal-close><div class=modal__container role=dialog aria-modal=true aria-labelledby=modal-title><div class=modal__content id=modal-content><div id=mySwipe class=swipe><div class=swipe-wrap></div></div></div><span class=modal__items><span class=modal__header><div class=modal__paging title="Page Info" aria-label="Current Page"></div><div class="modal__icon modal__toolbar modal__toolbar--close" title=Close aria-label="Close Button" data-micromodal-close><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" width="25" height="25"><path fill="currentcolor" d="M21.734375 19.640625l-2.097656 2.09375C19.253906 22.121094 18.628906 22.121094 18.242188 21.734375L13 16.496094 7.761719 21.734375C7.375 22.121094 6.746094 22.121094 6.363281 21.734375l-2.097656-2.09375c-.386719-.386718999999999-.386719-1.011719.0-1.398437L9.503906 13 4.265625 7.761719c-.382812-.390625-.382812-1.019531.0-1.398438L6.363281 4.265625C6.746094 3.878906 7.375 3.878906 7.761719 4.265625L13 9.507813l5.242188-5.242188c.386718000000002-.386719 1.015625-.386719 1.394531.0l2.097656 2.09375C22.121094 6.746094 22.121094 7.375 21.738281 7.761719L16.496094 13l5.238281 5.242188C22.121094 18.628906 22.121094 19.253906 21.734375 19.640625z"/></svg></div><div class="modal__icon modal__toolbar modal__toolbar--full" title="Full Screen" aria-label="Full Screen Button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="25" height="25"><path fill="currentcolor" d="M5 3C3.9069372 3 3 3.9069372 3 5V8A1.0001 1.0001.0 105 8V5H8A1.0001 1.0001.0 108 3H5zM16 3a1.0001 1.0001.0 100 2h3V8a1.0001 1.0001.0 102 0V5C21 3.9069372 20.093063 3 19 3H16zM3.984375 14.986328A1.0001 1.0001.0 003 16v3c0 1.093063.9069372 2 2 2H8a1.0001 1.0001.0 100-2H5V16A1.0001 1.0001.0 003.984375 14.986328zm16 0A1.0001 1.0001.0 0019 16v3H16a1.0001 1.0001.0 100 2h3C20.093063 21 21 20.093063 21 19V16a1.0001 1.0001.0 00-1.015625-1.013672z"/></svg></div><div class="modal__icon modal__toolbar modal__toolbar--normal" title="Normal Screen" aria-label="Normal Screen Button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="25" height="25"><path fill="currentcolor" d="M16.96875 4.972656C15.867188 4.988281 14.984375 5.894531 15 7v8H7C6.277344 14.988281 5.609375 15.367188 5.246094 15.992188 4.878906 16.613281 4.878906 17.386719 5.246094 18.007813 5.609375 18.632813 6.277344 19.011719 7 19H19V7C19.007813 6.460938 18.796875 5.941406 18.414063 5.558594 18.03125 5.175781 17.511719 4.964844 16.96875 4.972656zm16 0c-1.046875.015625-1.90625.839844-1.964844 1.886719C31 6.90625 31 6.953125 31 7V19H43C43.066406 19 43.132813 19 43.199219 18.992188 44.269531 18.894531 45.070313 17.972656 45.015625 16.902344 44.964844 15.828125 44.074219 14.988281 43 15H35V7C35.007813 6.460938 34.796875 5.941406 34.414063 5.558594 34.03125 5.175781 33.511719 4.964844 32.96875 4.972656zM7 31C6.277344 30.988281 5.609375 31.367188 5.246094 31.992188 4.878906 32.613281 4.878906 33.386719 5.246094 34.007813 5.609375 34.632813 6.277344 35.011719 7 35h8v8C14.988281 43.722656 15.367188 44.390625 15.992188 44.753906 16.613281 45.121094 17.386719 45.121094 18.007813 44.753906 18.632813 44.390625 19.011719 43.722656 19 43V31zm24 0V43C30.988281 43.722656 31.367188 44.390625 31.992188 44.753906 32.613281 45.121094 33.386719 45.121094 34.007813 44.753906 34.632813 44.390625 35.011719 43.722656 35 43V35h8C43.722656 35.011719 44.390625 34.632813 44.753906 34.007813 45.121094 33.386719 45.121094 32.613281 44.753906 31.992188 44.390625 31.367188 43.722656 30.988281 43 31z"/></svg></div></span><div class="modal__icon modal__arrow modal__arrow--left" title="Arrow Left" aria-label="Arrow Left Button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" width="28" height="28"><path fill="currentcolor" d="M23.28125 11 10 10V6.851563C10 6.523438 9.839844 6.277344 9.519531 6.03125 9.199219 5.949219 8.878906 5.949219 8.640625 6.113281c-3.28125 2.296875-6.402344 6.144532-6.480469 6.308594-.078125.15625-.152343.390625-.15625.554688000000001C2.003906 12.980469 2 12.988281 2 12.992188 2 13.15625 2.078125 13.402344 2.160156 13.484375 2.238281 13.648438 5.28125 17.507813 8.640625 19.804688 8.960938 19.96875 9.28125 20.050781 9.519531 19.886719 9.839844 19.722656 10 19.476563 10 19.148438V16l13.28125-1C23.679688 14.679688 24 13.875 24 12.992188 24 12.195313 23.761719 11.320313 23.28125 11z"/></svg></div><div class="modal__icon modal__arrow modal__arrow--right" title="Arrow Right" aria-label="Arrow Right Button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" width="28" height="28"><path fill="currentcolor" d="M2.71875 11.023438l13.28125-1V6.875C16 6.546875 16.160156 6.300781 16.480469 6.054688 16.800781 5.972656 17.121094 5.972656 17.359375 6.136719c3.28125 2.296875 6.402344 6.144531 6.480469 6.308594.078125.15625.152343999999999.390625.15625.554687C23.996094 13.003906 24 13.011719 24 13.015625 24 13.179688 23.921875 13.425781 23.839844 13.507813 23.761719 13.671875 20.71875 17.53125 17.359375 19.828125 17.039063 19.992188 16.71875 20.074219 16.480469 19.910156 16.160156 19.746094 16 19.5 16 19.171875V16.023438L2.71875 15.023438C2.320313 14.703125 2 13.898438 2 13.015625c0-.796875.238281-1.671875.71875-1.992187z"/></svg></div><div class=modal__caption><div class=modal__caption--text></div></div></span></div></div></div><script defer src=/js/swipe.min.989e074dfb92ce7f57a92c1df7027f88b53c50a54fd9ad450a673a64aa91bfa4.js></script><script defer src=/js/micromodal.min.de01b44b2f383056bbcaf6ee921fd385d79108ec1129afd0eb2f3f5a07e11f45.js></script><script defer src=/js/helper/fadeinout.min.js></script><script>document.addEventListener('DOMContentLoaded',function(){var d=document.documentElement,g,f,s,r,m,o,l,b,c,i,n,e,h,j,a,p,q;function t(){d.requestFullscreen?d.requestFullscreen():d.mozRequestFullScreen?d.mozRequestFullScreen():d.webkitRequestFullscreen?d.webkitRequestFullscreen():d.msRequestFullscreen&&d.msRequestFullscreen()}function k(){(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement)&&(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen())}g=document.getElementById('modal'),f=document.querySelector('.gallery__container'),s=document.querySelector('.swipe-wrap'),r=document.getElementById('mySwipe'),m=document.querySelector('.modal__arrow--left'),o=document.querySelector('.modal__arrow--right'),l=document.querySelector('.modal__toolbar--close'),b=document.querySelector('.modal__toolbar--full'),c=document.querySelector('.modal__toolbar--normal'),i=document.querySelector('.modal__caption'),n=document.querySelector('.modal__paging'),e=document.querySelector('.modal__items'),h=null,j=null,a=null,p=function(b){b.key==='ArrowRight'?g&&g.classList.contains('is-open')&&a.next():b.key==='ArrowLeft'&&g&&g.classList.contains('is-open')&&a.prev()},f?h=f.querySelectorAll('img').length:(f=document.querySelector('.single__contents'),h=f.querySelectorAll('img').length),MicroModal.init({onClose:function(){a&&(a.kill(),a=null,k()),window.removeEventListener('keydown',p)},disableScroll:!0,disableFocus:!0,awaitOpenAnimation:!1,awaitCloseAnimation:!1,debugMode:!1}),q=function(a){return new Promise(function(c,d){var b=new Image;b.onload=function(){c(b)},b.onerror=d,b.src=a})},f.querySelectorAll('img').forEach(function(g,k){var f,d;g.style.cursor='pointer',f=g.cloneNode(!0),f.style.maxHeight='100%',f.style.maxWidth='100%',f.onclick=function(a){a.stopPropagation()},d=document.createElement('div'),d.style.width='100%',d.style.height='100vh',d.setAttribute('data-micromodal-close',''),d.onclick=function(){a&&(a.kill(),a=null)},d.onmouseenter=function(){clearTimeout(j),fadeIn(e,200)},d.onmouseleave=function(){j=setTimeout(function(){fadeOut(e,200)},2500)},d.ontouchstart=function(){fadeIn(e,200)},d.append(f),s.append(d),g.addEventListener('click',async function(d){var m,l,g;MicroModal.show('modal'),a&&(a.kill(),a=null),m=d.target.getAttribute('data-src')||d.target.getAttribute('src'),l=await q(m),f.style.width=l.width+'px',f.style.height=l.height+'px',a=new Swipe(r,{startSlide:k,draggable:!0,autoRestart:!1,continuous:!1,disableScroll:!0,stopPropagation:!0,callback:async function(d,f){var a=f.querySelector('img'),g=a.getAttribute('data-src')||a.getAttribute('src'),c=await q(g),b;a.style.width=c.width+'px',a.style.height=c.height+'px',i&&a&&(b=null,a.getAttribute('data-caption')?b=a.getAttribute('data-caption'):a.getAttribute('title')?b=a.getAttribute('title'):a.getAttribute('alt')?b=a.getAttribute('alt'):b=a.getAttribute('src'),i.querySelector('.modal__caption--text').innerText=b,n.innerText=d+1+' / '+h,clearTimeout(j),fadeIn(e,200))}}),fadeIn(e),i&&(g=null,d.target.getAttribute('data-caption')?g=d.target.getAttribute('data-caption'):d.target.getAttribute('title')?g=d.target.getAttribute('title'):d.target.getAttribute('alt')?g=d.target.getAttribute('alt'):g=d.target.getAttribute('src'),i.querySelector('.modal__caption--text').innerText=g,n.innerText=k+1+' / '+h),c&&b&&(c.style.zIndex=-1,c.style.opacity=0,b.style.zIndex=25,b.style.opacity=1)}),window.addEventListener('keydown',p)}),m?m.addEventListener('click',function(b){a&&a.prev()}):null,o?o.addEventListener('click',function(b){a&&a.next()}):null,l?l.addEventListener('click',function(){a&&(a.kill(),a=null),k(),MicroModal.close('modal')}):null,b?b.addEventListener('click',function(a){t(),c&&(c.style.zIndex=25,c.style.opacity=1,b.style.zIndex=-1,b.style.opacity=0)}):null,c?c.addEventListener('click',function(a){k(),b&&(b.style.zIndex=25,b.style.opacity=1,c.style.zIndex=-1,c.style.opacity=0)}):null})</script><div class=hide><div class=search><span class=icon><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentcolor" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M15.5 14h-.79l-.28-.27c1.2-1.4 1.82-3.31 1.48-5.34-.47-2.78-2.79-5-5.59-5.34-4.23-.52-7.79 3.04-7.27 7.27.34 2.8 2.56 5.12 5.34 5.59 2.03.34 3.94-.28 5.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49.0s.41-1.08.0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg></span><input id=search aria-label="Site Search" class=input type=text placeholder=Search autocomplete=off><div id=search-results class=dropdown><div id=search-menu class=dropdown-menu role=menu></div></div></div></div></div></main><aside class="single__side main-side"><section class="sidebar hide"><script>document.querySelector('.sidebar').classList.remove('hide')</script><div class=toc__flexbox data-position=fixed><h6 class=toc__title data-ani=true>What's on this Page</h6><label class=switch data-ani=true><input id=toggle-toc aria-label="Toggle TOC" type=checkbox checked>
<span class="slider round"></span></label></div><div class=toc data-dir=ltr data-folding=true data-ani=true><nav id=TableOfContents><ul><li><a href=#簡介>簡介</a></li><li><a href=#elf-header>ELF header</a><ul><li><a href=#e_ident>e_ident</a></li><li><a href=#e_type>e_type</a><ul><li><a href=#et_rel>ET_REL</a></li><li><a href=#et_exec>ET_EXEC</a></li><li><a href=#et_dyn>ET_DYN</a></li><li><a href=#et_core>ET_CORE</a></li></ul></li><li><a href=#e_machine>e_machine</a><ul><li><a href=#簡單bpf-xdp>簡單bpf xdp</a></li></ul></li><li><a href=#e_version>e_version</a></li><li><a href=#e_entry>e_entry</a><ul><li><a href=#實驗e_entry>實驗e_entry</a></li></ul></li><li><a href=#e_phoff>e_phoff</a></li><li><a href=#e_shoff>e_shoff</a></li><li><a href=#e_flags>e_flags</a></li><li><a href=#e_ehsize>e_ehsize</a></li><li><a href=#e_phentsize>e_phentsize</a></li><li><a href=#e_phnum>e_phnum</a></li><li><a href=#e_shentsize>e_shentsize</a></li><li><a href=#e_shnum>e_shnum</a></li><li><a href=#e_shstrndx>e_shstrndx</a><ul><li><a href=#實驗看看>實驗看看</a></li></ul></li></ul></li><li><a href=#program-headers>Program Headers</a><ul><li><a href=#p_type>p_type</a><ul><li><a href=#pt_interp實驗>PT_INTERP實驗</a></li><li><a href=#pt_tls實驗>PT_TLS實驗</a></li></ul></li><li><a href=#p_flags>p_flags</a></li><li><a href=#p_offset>p_offset</a></li><li><a href=#p_vaddr>p_vaddr</a></li><li><a href=#p_paddr>p_paddr</a></li><li><a href=#p_filesz>p_filesz</a></li><li><a href=#p_memsz>p_memsz</a></li><li><a href=#p_align>p_align</a></li></ul></li><li><a href=#section-headers>Section Headers</a><ul><li><a href=#sh_name>sh_name</a></li><li><a href=#sh_type>sh_type</a><ul><li><a href=#initialization-and-termination-functions>Initialization and Termination Functions</a></li></ul></li><li><a href=#sh_flags>sh_flags</a></li><li><a href=#sh_addr>sh_addr</a></li><li><a href=#sh_offset>sh_offset</a></li><li><a href=#sh_size>sh_size</a></li><li><a href=#sh_link>sh_link</a></li><li><a href=#sh_info>sh_info</a></li><li><a href=#sh_addralign>sh_addralign</a></li><li><a href=#sh_entsize>sh_entsize</a></li></ul></li><li><a href=#special-sections>Special Sections</a><ul><li><a href=#relocation>Relocation</a><ul><li><a href=#types>Types</a></li></ul></li></ul></li><li><a href=#進階練習>進階練習</a></li><li><a href=#參考>參考</a></li></ul></nav></div></section></aside><script>var enableToc=JSON.parse("true"),toc=JSON.parse("null"),tocPosition=JSON.parse('"inner"'),singleMainElem=document.querySelector('.single__main'),singleSideElem=document.querySelector('.single__side');enquire.register("screen and (max-width: 769px)",{match:function(){(enableToc||toc)&&tocPosition!=="outer"?singleMainElem&&singleSideElem&&(singleMainElem.classList.remove('main-main'),singleMainElem.classList.add('main'),singleSideElem.classList.remove('main-side'),singleSideElem.classList.add('hide')):tocPosition==="outer"&&(singleMainElem&&!singleMainElem.classList.contains('main-main')&&(singleMainElem.classList.remove('main-main'),singleMainElem.classList.add('main')),singleSideElem&&!singleSideElem.classList.contains('hide')&&singleSideElem.classList.add('hide'))},unmatch:function(){var b,a;(enableToc||toc)&&tocPosition!=="outer"?(singleMainElem.classList.remove('main'),singleMainElem.classList.add('main-main'),singleSideElem.classList.remove('hide'),singleSideElem.classList.add('main-side')):tocPosition==="outer"&&(singleMainElem&&!singleMainElem.classList.contains('main-main')&&(singleMainElem.classList.remove('main-main'),singleMainElem.classList.add('main')),singleSideElem&&!singleSideElem.classList.contains('hide')&&singleSideElem.classList.add('hide')),b=document.querySelector('.navbar__burger'),a=document.getElementsByClassName('navbarm__collapse')[0],a&&(a.setAttribute('data-open',!1),a.style.maxHeight=0,b.classList.remove('is-active')),document.getElementsByClassName('navbar__menu')[0].classList.remove('is-active'),document.getElementsByClassName('mobile-search')[0].classList.add('hide')},setup:function(){},deferSetup:!0,destroy:function(){}})</script><script defer src=/js/helper/getParents.min.js></script><script defer src=/js/helper/closest.min.js></script><script defer src=/js/helper/prev.min.js></script><script defer src=/js/helper/prop.min.js></script><script defer src=/js/helper/fadeinout.min.js></script><script defer src=/js/helper/throttle.min.js></script><script defer src=https://cdn.jsdelivr.net/npm/mermaid@8.8.4/dist/mermaid.min.js integrity="sha256-/+BzMP7spK5kZq/eJyTUBpewugOb45C/VbvZkziFAB4=" crossorigin=anonymous></script><script>'use strict';window.onload=function(){var f=document.querySelector('.navbar'),D=document.querySelector('.single__contents'),E=JSON.parse("false"),J=JSON.parse("true"),s,H,F,L,k,j,A,g,u,x,d,e,l,i,I,C,K,v,N,y,r,z,b,w,t,M,h,c,G,a,m,n,o,p,B,q;E&&J&&(s=document.querySelector('#busuanzi_value_page_pv'),s.textContent=s.textContent.replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")),H=JSON.parse("true"),F=JSON.parse("null"),L=JSON.parse("false"),k=document.querySelector('.toc__flexbox'),j=document.querySelector('.toc__flexbox--outer'),A=JSON.parse("true"),(H||F)&&document.querySelector('.toc')&&(g=document.querySelector('.toc').querySelector('#TableOfContents'),g.onmouseenter=function(){f.classList.contains('scrolling')&&f.classList.remove('scrolling')},g.onmouseleave=function(){f.classList.contains('scrolling')||f.classList.add('scrolling')},!1===A||(g.querySelectorAll('ul')?g.querySelectorAll('ul').forEach(function(a){a.querySelectorAll('li').forEach(function(a){a.querySelectorAll('ul').forEach(function(a){a.style.display='none'})})}):null),g&&(g.querySelectorAll('a').length>0?g.querySelectorAll('a').forEach(function(a){a.addEventListener('click',function(){var c=a.getAttribute('id'),b;f.classList.contains('scrolling')||(f.classList.remove('navbar--show'),f.classList.remove('navbar--hide'),f.classList.add('navbar--hide')),document.querySelector('.toc').querySelectorAll('a').forEach(function(a){a.classList.remove('active')}),a.classList.add('active'),b=g.querySelector('[href="#'+c+'"]'),b&&b.nextElementSibling&&(b.nextElementSibling.style.display='block'),b&&(getParents(b,'ul')?getParents(b,'ul').forEach(function(a){a.style.display='block'}):null)})}):(k&&(k.setAttribute('data-position',''),k.classList.contains('hide')||k.classList.add('hide')),j&&(j.setAttribute('data-position',''),j.classList.contains('hide')||j.classList.add('hide')))),u=document.getElementById("toggle-toc"),x=document.getElementById('visible-toc'),d=document.querySelector('.toc'),e=document.querySelector('main'),l=document.querySelector('side'),i=document.querySelector('.toc__flexbox'),u?u.addEventListener('change',function(a){a.target.checked?(d&&fadeIn(d,200),i&&i.setAttribute('data-position','fixed'),e&&(e.classList.remove('main-main'),e.classList.remove('main'),e.classList.add('main-main')),l&&l.classList.remove('main-side')):(d&&fadeOut(d,200),i&&i.setAttribute('data-position','absolute'),e&&(e.classList.remove('main-main'),e.classList.remove('main'),e.classList.add('main')),l&&l.classList.remove('main-side'))}):null,x?x.addEventListener('change',function(a){a.target.checked?d&&fadeIn(d,200):d&&fadeOut(d,200)}):null),I=120,C=70,K=function(){d&&(d.style.maxHeight=window.innerHeight-I-C+'px')},v=throttle(K,300),v(),window.addEventListener('resize',v),y=new ClipboardJS('.anchor'),r=D.querySelectorAll("h1, h2, h3, h4"),z=JSON.parse('"ltr"'),r?r.forEach(function(c){var d=parseInt(c.tagName.substr(1),10)*2,e=encodeURI(document.location.origin+document.location.pathname),f=e+"#"+c.getAttribute('id'),b=document.createElement('span'),a;b.classList.add('anchor'),b.classList.add('hide'),b.setAttribute('data-clipboard-text',decodeURI(f)),b.style.position='relative',a=document.createElement('span'),a.style.position='absolute',a.style.top='50%',a.style.left='0.75rem',a.style.transform='translateY(-50%)',a.innerHTML=`
<svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="${32-d}px" height="${32-d}px"><path d="M 5.5625 0 C 4.136719 0 2.707031 0.542969 1.625 1.625 C -0.539063 3.789063 -0.539063 7.335938 1.625 9.5 L 5.28125 13.15625 C 5.667969 13.554688 6.304688 13.558594 6.703125 13.171875 C 7.101563 12.785156 7.105469 12.148438 6.71875 11.75 L 3.03125 8.0625 C 1.632813 6.664063 1.632813 4.429688 3.03125 3.03125 C 4.429688 1.632813 6.664063 1.632813 8.0625 3.03125 L 12.96875 7.9375 C 14.367188 9.335938 14.367188 11.570313 12.96875 12.96875 C 12.804688 13.132813 12.621094 13.25 12.4375 13.375 C 11.980469 13.6875 11.859375 14.308594 12.171875 14.765625 C 12.484375 15.222656 13.105469 15.34375 13.5625 15.03125 C 13.847656 14.835938 14.125 14.625 14.375 14.375 C 16.539063 12.210938 16.539063 8.664063 14.375 6.5 L 9.5 1.625 C 8.417969 0.542969 6.988281 0 5.5625 0 Z M 10.78125 8.875 C 10.738281 8.882813 10.695313 8.894531 10.65625 8.90625 C 10.507813 8.9375 10.371094 9 10.25 9.09375 C 10.039063 9.253906 9.820313 9.429688 9.625 9.625 C 7.460938 11.789063 7.460938 15.335938 9.625 17.5 L 14.5 22.375 C 16.664063 24.539063 20.210938 24.539063 22.375 22.375 C 24.539063 20.210938 24.539063 16.664063 22.375 14.5 L 18.71875 10.875 C 18.476563 10.578125 18.089844 10.441406 17.714844 10.527344 C 17.34375 10.613281 17.050781 10.90625 16.964844 11.277344 C 16.878906 11.652344 17.015625 12.039063 17.3125 12.28125 L 20.96875 15.9375 C 22.367188 17.335938 22.367188 19.570313 20.96875 20.96875 C 19.570313 22.367188 17.335938 22.367188 15.9375 20.96875 L 11.03125 16.0625 C 9.632813 14.664063 9.632813 12.429688 11.03125 11.03125 C 11.152344 10.90625 11.300781 10.820313 11.4375 10.71875 C 11.839844 10.472656 12.015625 9.976563 11.855469 9.53125 C 11.699219 9.085938 11.25 8.8125 10.78125 8.875 Z"/></svg>`,z==="rtl"?a.style.left='-2rem':a.style.right='-2rem',b.append(a),c.append(b),c.addEventListener('mouseenter',function(){this.querySelector('.anchor').classList.remove('hide')}),c.addEventListener('mouseleave',function(){this.querySelector('.anchor').classList.add('hide')})}):null,document.querySelectorAll('.anchor').forEach(function(a){a.addEventListener('mouseleave',function(){a.setAttribute('aria-label',null),a.classList.remove('tooltipped'),a.classList.remove('tooltipped-s'),a.classList.remove('tooltipped-w')})}),y.on('success',function(a){a.clearSelection(),a.trigger.setAttribute('aria-label','Link copied to clipboard!'),a.trigger.classList.add('tooltipped'),a.trigger.classList.add('tooltipped-s')}),b=JSON.parse('["mermaid"]'),b&&b.includes('mermaid')&&(w=localStorage.getItem('theme')||JSON.parse('"dark"'),w==="dark"||w==="hacker"?mermaid.initialize({theme:'dark'}):mermaid.initialize({theme:'default'}),t=[],[].push.apply(t,document.getElementsByClassName('language-mermaid')),t.forEach(function(b){var a=b.parentNode,c;a!==document.body&&(a.parentNode.insertBefore(b,a),a.parentNode.removeChild(a)),c=document.createElement('div'),c.classList.add('mermaid'),c.style.padding='34px 4px 6px',c.innerHTML=b.innerHTML,b.replaceWith(c)})),b&&b.includes('katex')&&(M=document.getElementsByClassName('math'),h={delimiters:[{left:"$$",right:"$$",display:!0},{left:"\\[",right:"\\]",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1}]},renderMathInElement(document.querySelector('.single__contents'),h)),b&&b.includes('flowchartjs')&&(h=JSON.parse('{"arrow-end":"block","element-color":"black","fill":"white","flowstate":{"approved":{"fill":"#58C4A3","font-size":12,"no-text":"n/a","yes-text":"APPROVED"},"current":{"fill":"yellow","font-color":"red","font-weight":"bold"},"future":{"fill":"#FFFF99"},"invalid":{"fill":"#444444"},"past":{"fill":"#CCCCCC","font-size":12},"rejected":{"fill":"#C45879","font-size":12,"no-text":"REJECTED","yes-text":"n/a"},"request":{"fill":"blue"}},"font-color":"black","font-size":14,"line-color":"black","line-length":50,"line-width":3,"no-text":"no","scale":1,"symbols":{"end":{"class":"end-element"},"start":{"element-color":"green","fill":"yellow","font-color":"red"}},"text-margin":10,"x":0,"y":0,"yes-text":"yes"}'),c=null,G="language-flowchart",a=0,Array.prototype.forEach.call(document.querySelectorAll("[class^="+G+"]"),function(b){var d,e;b.style.display='none',b.parentNode.style.backgroundColor="transparent",c=b.innerText,d=document.createElement('div'),d.id='flowchart'+a,b.parentNode.insertBefore(d,b),e=flowchart.parse(c),e.drawSVG("flowchart"+a,h),a+=1})),document.querySelectorAll("mjx-container").forEach(function(a){a.parentElement.classList+='has-jax'}),b&&b.includes('msc')&&(h=JSON.parse('{"theme":"hand"}'),c=null,a=0,m="language-msc",Array.prototype.forEach.call(document.querySelectorAll("[class^="+m+"]"),function(b){var d,e;b.style.display='none',b.parentNode.style.backgroundColor="transparent",c=b.innerText,d=document.createElement('div'),d.id='msc'+a,b.parentNode.insertBefore(d,b),e=Diagram.parse(c),e.drawSVG("msc"+a,h),a+=1})),b&&b.includes('chart')&&(n="#666",o="#ddd",p=2,Chart.defaults.global.elements.rectangle.borderWidth=p,Chart.defaults.global.elements.rectangle.borderColor=n,Chart.defaults.global.elements.rectangle.backgroundColor=o,Chart.defaults.global.elements.line.borderWidth=p,Chart.defaults.global.elements.line.borderColor=n,Chart.defaults.global.elements.line.backgroundColor=o,Chart.defaults.global.elements.point.borderWidth=p,Chart.defaults.global.elements.point.borderColor=n,Chart.defaults.global.elements.point.backgroundColor=o,m="language-chart",a=0,c=null,Array.prototype.forEach.call(document.querySelectorAll("[class^="+m+"]"),function(b){var d,e,f,g;b.style.display='none',b.parentNode.style.backgroundColor="transparent",c=b.innerText,d=document.createElement('canvas'),e=null,d.height=200,d.style.height=200,d.id='myChart'+a,e=JSON.parse(c),b.parentNode.insertBefore(d,b),f=document.getElementById('myChart'+a).getContext('2d'),g=new Chart(f,e),a+=1})),b&&b.includes('wavedrom')&&(B="language-wave",a=0,c=null,Array.prototype.forEach.call(document.querySelectorAll("[class^="+B+"]"),function(b){var d,e;b.style.display='none',b.parentNode.style.backgroundColor="transparent",c=b.innerText,d=document.createElement('div'),e=null,d.id='WaveDrom_Display_'+a,e=JSON.parse(c),b.parentNode.insertBefore(d,b),WaveDrom.RenderWaveForm(a,e,"WaveDrom_Display_"),a+=1})),b&&b.includes('viz')&&(q="language-viz-",Array.prototype.forEach.call(document.querySelectorAll("[class^="+q+"]"),function(a){var b,c;a.style.display='none',a.parentNode.style.backgroundColor="transparent",a.getAttribute("class").split(" ").forEach(function(a){a.startsWith(q)&&(b=a.substr(q.length))}),c=new Viz,c.renderSVGElement(a.innerText,{engine:b}).then(function(b){b.style.width="100%",a.parentNode.insertBefore(b,a)})}))}</script><footer class=footer><div class=dropdown><button class=dropdown-trigger aria-label="Select Language Button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path fill="currentcolor" d="M12.65 15.67c.14-.36.05-.77-.23-1.05l-2.09-2.06.03-.03c1.74-1.94 2.98-4.17 3.71-6.53h1.94c.54.0.99-.45.99-.99v-.02c0-.54-.45-.99-.99-.99H10V3c0-.55-.45-1-1-1s-1 .45-1 1v1H1.99c-.54.0-.99.45-.99.99.0.55.45.99.99.99h10.18C11.5 7.92 10.44 9.75 9 11.35c-.81-.89-1.49-1.86-2.06-2.88-.16-.29-.45-.47-.78-.47-.69.0-1.13.75-.79 1.35.63 1.13 1.4 2.21 2.3 3.21L3.3 16.87c-.4.39-.4 1.03.0 1.42.39.39 1.02.39 1.42.0L9 14l2.02 2.02c.51.51 1.38.32 1.63-.35zM17.5 10c-.6.0-1.14.37-1.35.94l-3.67 9.8c-.24.61.22 1.26.87 1.26.39.0.74-.24.88-.61l.89-2.39h4.75l.9 2.39c.14.36.49.61.88.61.65.0 1.11-.65.88-1.26l-3.67-9.8c-.22-.57-.76-.94-1.36-.94zm-1.62 7 1.62-4.33L19.12 17h-3.24z"/></svg></button><div class=dropdown-content></div></div><div class=footer__social><div class=social><a href=mailto:yihsun1992@gmail.com title=email aria-label=email><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path fill="currentcolor" d="M20 4H4c-1.1.0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1.0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-.4 4.25-7.07 4.42c-.32.2-.74.2-1.06.0L4.4 8.25c-.25-.16-.4-.43-.4-.72.0-.67.73-1.07 1.3-.72L12 11l6.7-4.19c.57-.35 1.3.05 1.3.72.0.29-.15.56-.4.72z"/></svg></a><a href="https://www.facebook.com/profile.php?id=100001559307331" title=facebook aria-label=facebook><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 24 24"><g id="surface2747"><path fill="currentcolor" d="M11.664062 2.003906C6.621094 2.171875 2.375 6.25 2.023438 11.289062c-.367188 5.328126 3.445312 9.832032 8.484374 10.589844V14.648438H8.890625C8.164062 14.648438 7.578125 14.0625 7.578125 13.335938c0-.726563000000001.585937-1.3125 1.3125-1.3125h1.613281v-1.75c0-2.894532 1.410156-4.167969 3.820313-4.167969C14.679688 6.105469 14.984375 6.113281 15.242188 6.128906 15.878906 6.15625 16.371094 6.6875 16.371094 7.324219c0 .664062-.535155999999999 1.199219-1.199219 1.199219H14.730469c-1.019531.0-1.378907.96875-1.378907 2.0625v1.4375h1.871094c.589843999999999.0 1.042969.527343.953125 1.109374L16.066406 13.835938C15.992188 14.304688 15.589844 14.652344 15.113281 14.652344H13.351562v7.246094C18.234375 21.234375 22 17.0625 22 12c0-5.632812-4.660156-10.179688-10.335938-9.996094zm0 0"/></g></svg></a><a href=https://github.com/Lu-Yi-Hsun title=github aria-label=github><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 24 24"><g id="surface3680"><path fill="currentcolor" d="M10.898438 2.101562c-4.597657.5-8.296876 4.199219-8.796876 8.699219-.5 4.699219 2.199219 8.898438 6.296876 10.5C8.699219 21.398438 9 21.199219 9 20.800781V19.199219S8.601562 19.300781 8.101562 19.300781c-1.402343.0-2-1.199219-2.101562-1.902343C5.898438 17 5.699219 16.699219 5.398438 16.398438 5.101562 16.300781 5 16.300781 5 16.199219 5 16 5.300781 16 5.398438 16 6 16 6.5 16.699219 6.699219 17c.5.800781000000001 1.101562 1 1.402343 1C8.5 18 8.800781 17.898438 9 17.800781 9.101562 17.101562 9.398438 16.398438 10 16c-2.300781-.5-4-1.800781-4-4 0-1.101562.5-2.199219 1.199219-3C7.101562 8.800781 7 8.300781 7 7.601562c0-.402343.0-1 .300781-1.601562.0.0 1.398438.0 2.800781 1.300781C10.601562 7.101562 11.300781 7 12 7s1.398438.101562 2 .300781C15.300781 6 16.800781 6 16.800781 6 17 6.601562 17 7.199219 17 7.601562 17 8.398438 16.898438 8.800781 16.800781 9 17.5 9.800781 18 10.800781 18 12c0 2.199219-1.699219 3.5-4 4 .601562.5 1 1.398438 1 2.300781v2.597657C15 21.199219 15.300781 21.5 15.699219 21.398438 19.398438 19.898438 22 16.300781 22 12.101562c0-6-5.101562-10.703124-11.101562-10zm0 0"/></g></svg></a><a href="https://api.whatsapp.com/send/?phone=8860978711793&text&app_absent=0" title=whatsapp aria-label=whatsapp><svg data-name="whatsapp" fill="currentcolor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="32" height="32"><path d="M12.011719 2C6.5057187 2 2.0234844 6.478375 2.0214844 11.984375 2.0204844 13.744375 2.4814687 15.462563 3.3554688 16.976562L2 22l5.2324219-1.236328C8.6914219 21.559672 10.333859 21.977516 12.005859 21.978516H12.009766c5.505.0 9.985281-4.479375 9.988281-9.984375C22.000047 9.3251406 20.962172 6.8157344 19.076172 4.9277344 17.190172 3.0407344 14.683719 2.001 12.011719 2zM12.009766 4C14.145766 4.001 16.153109 4.8337969 17.662109 6.3417969c1.509 1.51 2.337938 3.5163906 2.335938 5.6503911C19.996047 16.396187 16.413812 19.978516 12.007812 19.978516 10.674812 19.977516 9.3544062 19.642812 8.1914062 19.007812L7.5175781 18.640625 6.7734375 18.816406 4.8046875 19.28125l.4804687-1.785156L5.5019531 16.695312 5.0878906 15.976562c-.698-1.208-1.0674062-2.589187-1.0664062-3.992187C4.0234844 7.582375 7.6067656 4 12.009766 4zM8.4765625 7.375c-.167.0-.437015600000001.0625-.6660156.3125-.229.249-.875.8520781-.875 2.0800781.0 1.2279999.894531199999999 2.4150309 1.0195312 2.5820309C8.0790781 12.515609 9.68175 15.115234 12.21875 16.115234c2.108.831 2.536141.666999999999998 2.994141.625C15.670891 16.699234 16.690438 16.137687 16.898438 15.554688 17.106437 14.971687 17.106922 14.470187 17.044922 14.367188 16.982922 14.263188 16.816406 14.201172 16.566406 14.076172c-.249000000000002-.125-1.476078-.727547-1.705078-.810547-.229000000000001-.0830000000000002-.3965-.125-.5625.125S13.655766 14.201187 13.509766 14.367188C13.363766 14.534188 13.21875 14.556641 12.96875 14.431641 12.71875 14.305641 11.914938 14.041406 10.960938 13.191406 10.218937 12.530406 9.7182656 11.714844 9.5722656 11.464844 9.4272656 11.215844 9.5585938 11.079078 9.6835938 10.955078c.112-.112.248046799999999-.291500000000001.3730472-.4375C10.180641 10.371578 10.223641 10.267562 10.306641 10.101562 10.389641 9.9355625 10.347156 9.7890625 10.285156 9.6640625 10.223156 9.5390625 9.737625 8.3065 9.515625 7.8125 9.328625 7.3975 9.131125 7.3878594 8.953125 7.3808594 8.808125 7.3748594 8.6425625 7.375 8.4765625 7.375z"/></svg></a><a href=https://lu-yi-hsun.github.io/posts/index.xml type=application/rss+xml title=RSS aria-label="RSS Feed Link"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><circle fill="currentcolor" cx="6.18" cy="17.82" r="2.18"/><path fill="currentcolor" d="M5.59 10.23c-.84-.14-1.59.55-1.59 1.4.0.71.53 1.28 1.23 1.4 2.92.51 5.22 2.82 5.74 5.74.12.7.69 1.23 1.4 1.23.85.0 1.54-.75 1.41-1.59-.68-4.2-3.99-7.51-8.19-8.18zm-.03-5.71C4.73 4.43 4 5.1 4 5.93c0 .73.55 1.33 1.27 1.4 6.01.6 10.79 5.38 11.39 11.39.07.73.67 1.28 1.4 1.28.84.0 1.5-.73 1.42-1.56-.73-7.34-6.57-13.19-13.92-13.92z"/></svg></a></div></div><div id=gtt><div class=gtt><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentcolor" d="M8.12 14.71 12 10.83l3.88 3.88c.39.39 1.02.39 1.41.0s.39-1.02.0-1.41L12.7 8.71c-.39-.39-1.02-.39-1.41.0L6.7 13.3c-.39.39-.39 1.02.0 1.41.39.38 1.03.39 1.42.0z"/></svg></div></div><hr><div class="basicflex flexwrap"></div><div class=footer__poweredby><p class=caption>©2022, All Rights Reserved</p><p class=caption>Powered by <a href=https://gohugo.io/ target=_blank rel=noreferrer>Hugo</a> and the <a href=https://github.com/zzossig/hugo-theme-zzo target=_blank rel=noreferrer>Zzo theme</a></p></div></footer></div><div class="wrapper__right hide" data-pad=true dir=ltr><script>document.querySelector('.wrapper__right').classList.remove('hide')</script></div></div></body></html>